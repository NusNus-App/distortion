{"version":3,"file":"src_app_pages_search_search_module_ts.js","mappings":"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","sources":["./src/app/pages/search/search-routing.module.ts","./src/app/pages/search/search.module.ts","./src/app/pages/search/search.page.ts","./node_modules/rxjs/_esm2015/internal/operators/debounceTime.js"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { SearchPage } from './search.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: SearchPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class SearchPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { ReactiveFormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { SearchPageRoutingModule } from './search-routing.module';\n\nimport { SearchPage } from './search.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    ReactiveFormsModule,\n    IonicModule,\n    SearchPageRoutingModule\n  ],\n  declarations: [SearchPage]\n})\nexport class SearchPageModule {}\n","import { Component, OnInit } from '@angular/core';\nimport { FormControl } from '@angular/forms';\nimport { pathToImageUrl } from '@app/shared/utils';\nimport { Observable } from 'rxjs';\nimport { debounceTime, distinctUntilChanged, map, switchMap, tap } from 'rxjs/operators';\nimport { SupabaseService } from '../../services/supabase.service';\n\n@Component({\n  selector: 'app-search',\n  templateUrl: './search.page.html',\n  styleUrls: ['./search.page.scss'],\n})\nexport class SearchPage implements OnInit {\n\n  searchTerm = new FormControl('');\n\n  searchResults$: Observable<any>;\n\n  constructor(\n    private supabaseService: SupabaseService\n  ) { }\n\n  ngOnInit() {\n    this.searchResults$ = this.searchTerm.valueChanges.pipe(\n      debounceTime(200),\n      distinctUntilChanged(),\n      switchMap(term => this.supabaseService.searchArtist(term)),\n      map(res => res.data),\n      tap(console.log)\n    );\n  }\n\n  imgUrl(path: string): string {\n    return path ? pathToImageUrl(path) : 'assets/distortion_logo.png';\n  }\n\n}\n","import { Subscriber } from '../Subscriber';\nimport { async } from '../scheduler/async';\nexport function debounceTime(dueTime, scheduler = async) {\n    return (source) => source.lift(new DebounceTimeOperator(dueTime, scheduler));\n}\nclass DebounceTimeOperator {\n    constructor(dueTime, scheduler) {\n        this.dueTime = dueTime;\n        this.scheduler = scheduler;\n    }\n    call(subscriber, source) {\n        return source.subscribe(new DebounceTimeSubscriber(subscriber, this.dueTime, this.scheduler));\n    }\n}\nclass DebounceTimeSubscriber extends Subscriber {\n    constructor(destination, dueTime, scheduler) {\n        super(destination);\n        this.dueTime = dueTime;\n        this.scheduler = scheduler;\n        this.debouncedSubscription = null;\n        this.lastValue = null;\n        this.hasValue = false;\n    }\n    _next(value) {\n        this.clearDebounce();\n        this.lastValue = value;\n        this.hasValue = true;\n        this.add(this.debouncedSubscription = this.scheduler.schedule(dispatchNext, this.dueTime, this));\n    }\n    _complete() {\n        this.debouncedNext();\n        this.destination.complete();\n    }\n    debouncedNext() {\n        this.clearDebounce();\n        if (this.hasValue) {\n            const { lastValue } = this;\n            this.lastValue = null;\n            this.hasValue = false;\n            this.destination.next(lastValue);\n        }\n    }\n    clearDebounce() {\n        const debouncedSubscription = this.debouncedSubscription;\n        if (debouncedSubscription !== null) {\n            this.remove(debouncedSubscription);\n            debouncedSubscription.unsubscribe();\n            this.debouncedSubscription = null;\n        }\n    }\n}\nfunction dispatchNext(subscriber) {\n    subscriber.debouncedNext();\n}\n"],"names":["Subscriber","async","debounceTime","dueTime","scheduler","source","lift","DebounceTimeOperator","constructor","call","subscriber","subscribe","DebounceTimeSubscriber","destination","debouncedSubscription","lastValue","hasValue","_next","value","clearDebounce","add","schedule","dispatchNext","_complete","debouncedNext","complete","next","remove","unsubscribe"],"sourceRoot":"webpack:///"}