{"version":3,"file":"default-src_app_services_supabase_service_ts.js","mappings":"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","sources":["./src/app/services/supabase.service.ts","./node_modules/@supabase/functions-js/dist/module/helper.js","./node_modules/@supabase/functions-js/dist/module/index.js","./node_modules/@supabase/gotrue-js/dist/module/GoTrueApi.js","./node_modules/@supabase/gotrue-js/dist/module/GoTrueClient.js","./node_modules/@supabase/gotrue-js/dist/module/index.js","./node_modules/@supabase/gotrue-js/dist/module/lib/constants.js","./node_modules/@supabase/gotrue-js/dist/module/lib/cookies.js","./node_modules/@supabase/gotrue-js/dist/module/lib/fetch.js","./node_modules/@supabase/gotrue-js/dist/module/lib/helpers.js","./node_modules/@supabase/gotrue-js/dist/module/lib/polyfills.js","./node_modules/@supabase/gotrue-js/dist/module/lib/types.js","./node_modules/@supabase/gotrue-js/dist/module/lib/version.js","./node_modules/@supabase/postgrest-js/dist/module/PostgrestClient.js","./node_modules/@supabase/postgrest-js/dist/module/index.js","./node_modules/@supabase/postgrest-js/dist/module/lib/PostgrestFilterBuilder.js","./node_modules/@supabase/postgrest-js/dist/module/lib/PostgrestQueryBuilder.js","./node_modules/@supabase/postgrest-js/dist/module/lib/PostgrestRpcBuilder.js","./node_modules/@supabase/postgrest-js/dist/module/lib/PostgrestTransformBuilder.js","./node_modules/@supabase/postgrest-js/dist/module/lib/constants.js","./node_modules/@supabase/postgrest-js/dist/module/lib/types.js","./node_modules/@supabase/postgrest-js/dist/module/lib/version.js","./node_modules/@supabase/realtime-js/dist/module/RealtimeChannel.js","./node_modules/@supabase/realtime-js/dist/module/RealtimeClient.js","./node_modules/@supabase/realtime-js/dist/module/RealtimePresence.js","./node_modules/@supabase/realtime-js/dist/module/RealtimeSubscription.js","./node_modules/@supabase/realtime-js/dist/module/index.js","./node_modules/@supabase/realtime-js/dist/module/lib/constants.js","./node_modules/@supabase/realtime-js/dist/module/lib/push.js","./node_modules/@supabase/realtime-js/dist/module/lib/serializer.js","./node_modules/@supabase/realtime-js/dist/module/lib/timer.js","./node_modules/@supabase/realtime-js/dist/module/lib/transformers.js","./node_modules/@supabase/realtime-js/dist/module/lib/version.js","./node_modules/@supabase/storage-js/dist/module/StorageClient.js","./node_modules/@supabase/storage-js/dist/module/lib/StorageBucketApi.js","./node_modules/@supabase/storage-js/dist/module/lib/StorageFileApi.js","./node_modules/@supabase/storage-js/dist/module/lib/constants.js","./node_modules/@supabase/storage-js/dist/module/lib/fetch.js","./node_modules/@supabase/storage-js/dist/module/lib/helpers.js","./node_modules/@supabase/storage-js/dist/module/lib/version.js","./node_modules/@supabase/supabase-js/dist/module/SupabaseClient.js","./node_modules/@supabase/supabase-js/dist/module/index.js","./node_modules/@supabase/supabase-js/dist/module/lib/SupabaseAuthClient.js","./node_modules/@supabase/supabase-js/dist/module/lib/SupabaseQueryBuilder.js","./node_modules/@supabase/supabase-js/dist/module/lib/SupabaseRealtimeClient.js","./node_modules/@supabase/supabase-js/dist/module/lib/constants.js","./node_modules/@supabase/supabase-js/dist/module/lib/helpers.js","./node_modules/@supabase/supabase-js/dist/module/lib/version.js","./node_modules/es5-ext/global.js","./node_modules/rxjs/_esm2015/internal/operators/pluck.js","./node_modules/websocket/lib/browser.js","./node_modules/websocket/lib/version.js"],"sourcesContent":["import { Injectable } from '@angular/core';\nimport { ArtistWithRelations } from '@app/interfaces/artist';\nimport { DayWithRelations } from '@app/interfaces/entities-with-releation';\nimport { createClient, SupabaseClient } from '@supabase/supabase-js';\nimport { FeatureCollection, LineString, Point, Polygon } from 'geojson';\nimport { from, Observable } from 'rxjs';\nimport { map, pluck } from 'rxjs/operators';\nimport { environment } from 'src/environments/environment';\nimport { definitions } from '../interfaces/supabase';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class SupabaseService {\n  private client: SupabaseClient;\n\n  constructor() {\n    this.client = createClient(environment.supabaseUrl, environment.supabaseKey);\n  }\n\n  get artists$(): Observable<ArtistWithRelations[]> {\n    return from(\n      this.client\n        .from<ArtistWithRelations>('artist')\n        .select(`\n          *,\n          timetable(\n            start_time,\n            end_time,\n            day(\n              name\n            ),\n            stage(\n              name\n            )\n          )\n        `)\n        .order('name')\n    ).pipe(\n      map(res => res.data)\n    );\n  }\n\n  get dayMaskBounds$(): Observable<definitions['day_event_mask'][]> {\n    return from(\n      this.client\n        .from<definitions['day_event_mask']>('day_event_mask')\n        .select(`\n          id,\n          bounds\n        `)\n    ).pipe(\n      map(res => res.data)\n    );\n  }\n\n  get days$(): Observable<DayWithRelations[]> {\n    return from(\n      this.client\n        .from<DayWithRelations>('day')\n        .select(`\n          id,\n          day,\n          name,\n          description,\n          event(\n            id,\n            name,\n            description,\n            bounds,\n            stage(\n              id,\n              name, \n              description,\n              timetable(\n                id,\n                start_time,\n                end_time,\n                artist(\n                  *\n                )\n\n              )\n            )\n          )\n        `)\n    ).pipe(\n      pluck('data')\n    );\n  }\n\n  artist(id: string): Observable<definitions['artist']> {\n    return from(\n      this.client\n        .from<definitions['artist']>('artist')\n        .select()\n        .filter('id', 'eq', id)\n        .single()\n    ).pipe(\n      map(res => res.data)\n    );;\n  }\n\n  searchArtist(searchTerm: string) {\n    return from(\n      this.client\n        .from('artist')\n        .select()\n        .textSearch('ts', searchTerm, {\n          config: 'english',\n          type: 'plain'\n        })\n    );\n  }\n\n  stageTimeTable(stageId: string) {\n    return from(\n      this.client\n        .from<definitions['timetable']>('timetable')\n        .select(`\n          start_time,\n          end_time,\n          artist(\n            id,\n            name\n          ),\n          stage(\n            name\n          )\n        `)\n        .filter('stage_id', 'eq', stageId)\n        .order('start_time')\n    ).pipe(\n      pluck('data')\n    );\n  }\n\n\n\n  downloadPhoto(bucket: string, path: string) {\n    return from(\n      this.client\n        .storage\n        .from(bucket)\n        .download(path)\n    );\n  }\n\n  //RPC\n  tableAsGeojson(table: keyof definitions): Observable<FeatureCollection<Point | LineString | Polygon>> {\n    return from(\n      this.client.rpc('table_as_geojson', { _tbl: table })\n    ).pipe(\n      pluck('data', 'geojson')\n    );\n  }\n\n}\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nexport const resolveFetch = (customFetch) => {\n    let _fetch;\n    if (customFetch) {\n        _fetch = customFetch;\n    }\n    else if (typeof fetch === 'undefined') {\n        _fetch = (...args) => __awaiter(void 0, void 0, void 0, function* () { return yield (yield import('cross-fetch')).fetch(...args); });\n    }\n    else {\n        _fetch = fetch;\n    }\n    return (...args) => _fetch(...args);\n};\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { resolveFetch } from './helper';\nexport class FunctionsClient {\n    constructor(url, { headers = {}, customFetch, } = {}) {\n        this.url = url;\n        this.headers = headers;\n        this.fetch = resolveFetch(customFetch);\n    }\n    /**\n     * Updates the authorization header\n     * @params token - the new jwt token sent in the authorisation header\n     */\n    setAuth(token) {\n        this.headers.Authorization = `Bearer ${token}`;\n    }\n    /**\n     * Invokes a function\n     * @param functionName - the name of the function to invoke\n     * @param invokeOptions - object with the following properties\n     * `headers`: object representing the headers to send with the request\n     * `body`: the body of the request\n     * `responseType`: how the response should be parsed. The default is `json`\n     */\n    invoke(functionName, invokeOptions) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const { headers, body } = invokeOptions !== null && invokeOptions !== void 0 ? invokeOptions : {};\n                const response = yield this.fetch(`${this.url}/${functionName}`, {\n                    method: 'POST',\n                    headers: Object.assign({}, this.headers, headers),\n                    body,\n                });\n                const isRelayError = response.headers.get('x-relay-error');\n                if (isRelayError && isRelayError === 'true') {\n                    return { data: null, error: new Error(yield response.text()) };\n                }\n                let data;\n                const { responseType } = invokeOptions !== null && invokeOptions !== void 0 ? invokeOptions : {};\n                if (!responseType || responseType === 'json') {\n                    data = yield response.json();\n                }\n                else if (responseType === 'arrayBuffer') {\n                    data = yield response.arrayBuffer();\n                }\n                else if (responseType === 'blob') {\n                    data = yield response.blob();\n                }\n                else {\n                    data = yield response.text();\n                }\n                return { data, error: null };\n            }\n            catch (error) {\n                return { data: null, error };\n            }\n        });\n    }\n}\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { get, post, put, remove } from './lib/fetch';\nimport { COOKIE_OPTIONS } from './lib/constants';\nimport { setCookies, getCookieString } from './lib/cookies';\nimport { expiresAt, resolveFetch } from './lib/helpers';\nexport default class GoTrueApi {\n    constructor({ url = '', headers = {}, cookieOptions, fetch, }) {\n        this.url = url;\n        this.headers = headers;\n        this.cookieOptions = Object.assign(Object.assign({}, COOKIE_OPTIONS), cookieOptions);\n        this.fetch = resolveFetch(fetch);\n    }\n    /**\n     * Create a temporary object with all configured headers and\n     * adds the Authorization token to be used on request methods\n     * @param jwt A valid, logged-in JWT.\n     */\n    _createRequestHeaders(jwt) {\n        const headers = Object.assign({}, this.headers);\n        headers['Authorization'] = `Bearer ${jwt}`;\n        return headers;\n    }\n    cookieName() {\n        var _a;\n        return (_a = this.cookieOptions.name) !== null && _a !== void 0 ? _a : '';\n    }\n    /**\n     * Generates the relevant login URL for a third-party provider.\n     * @param provider One of the providers supported by GoTrue.\n     * @param redirectTo A URL or mobile address to send the user to after they are confirmed.\n     * @param scopes A space-separated list of scopes granted to the OAuth application.\n     */\n    getUrlForProvider(provider, options) {\n        const urlParams = [`provider=${encodeURIComponent(provider)}`];\n        if (options === null || options === void 0 ? void 0 : options.redirectTo) {\n            urlParams.push(`redirect_to=${encodeURIComponent(options.redirectTo)}`);\n        }\n        if (options === null || options === void 0 ? void 0 : options.scopes) {\n            urlParams.push(`scopes=${encodeURIComponent(options.scopes)}`);\n        }\n        if (options === null || options === void 0 ? void 0 : options.queryParams) {\n            const query = new URLSearchParams(options.queryParams);\n            urlParams.push(`${query}`);\n        }\n        return `${this.url}/authorize?${urlParams.join('&')}`;\n    }\n    /**\n     * Creates a new user using their email address.\n     * @param email The email address of the user.\n     * @param password The password of the user.\n     * @param redirectTo A URL or mobile address to send the user to after they are confirmed.\n     * @param data Optional user metadata.\n     *\n     * @returns A logged-in session if the server has \"autoconfirm\" ON\n     * @returns A user if the server has \"autoconfirm\" OFF\n     */\n    signUpWithEmail(email, password, options = {}) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const headers = Object.assign({}, this.headers);\n                let queryString = '';\n                if (options.redirectTo) {\n                    queryString = '?redirect_to=' + encodeURIComponent(options.redirectTo);\n                }\n                const data = yield post(this.fetch, `${this.url}/signup${queryString}`, {\n                    email,\n                    password,\n                    data: options.data,\n                    gotrue_meta_security: { captcha_token: options.captchaToken },\n                }, { headers });\n                const session = Object.assign({}, data);\n                if (session.expires_in)\n                    session.expires_at = expiresAt(data.expires_in);\n                return { data: session, error: null };\n            }\n            catch (e) {\n                return { data: null, error: e };\n            }\n        });\n    }\n    /**\n     * Logs in an existing user using their email address.\n     * @param email The email address of the user.\n     * @param password The password of the user.\n     * @param redirectTo A URL or mobile address to send the user to after they are confirmed.\n     */\n    signInWithEmail(email, password, options = {}) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const headers = Object.assign({}, this.headers);\n                let queryString = '?grant_type=password';\n                if (options.redirectTo) {\n                    queryString += '&redirect_to=' + encodeURIComponent(options.redirectTo);\n                }\n                const data = yield post(this.fetch, `${this.url}/token${queryString}`, { email, password }, { headers });\n                const session = Object.assign({}, data);\n                if (session.expires_in)\n                    session.expires_at = expiresAt(data.expires_in);\n                return { data: session, error: null };\n            }\n            catch (e) {\n                return { data: null, error: e };\n            }\n        });\n    }\n    /**\n     * Signs up a new user using their phone number and a password.\n     * @param phone The phone number of the user.\n     * @param password The password of the user.\n     * @param data Optional user metadata.\n     */\n    signUpWithPhone(phone, password, options = {}) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const headers = Object.assign({}, this.headers);\n                const data = yield post(this.fetch, `${this.url}/signup`, {\n                    phone,\n                    password,\n                    data: options.data,\n                    gotrue_meta_security: { captcha_token: options.captchaToken },\n                }, { headers });\n                const session = Object.assign({}, data);\n                if (session.expires_in)\n                    session.expires_at = expiresAt(data.expires_in);\n                return { data: session, error: null };\n            }\n            catch (e) {\n                return { data: null, error: e };\n            }\n        });\n    }\n    /**\n     * Logs in an existing user using their phone number and password.\n     * @param phone The phone number of the user.\n     * @param password The password of the user.\n     */\n    signInWithPhone(phone, password) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const headers = Object.assign({}, this.headers);\n                const queryString = '?grant_type=password';\n                const data = yield post(this.fetch, `${this.url}/token${queryString}`, { phone, password }, { headers });\n                const session = Object.assign({}, data);\n                if (session.expires_in)\n                    session.expires_at = expiresAt(data.expires_in);\n                return { data: session, error: null };\n            }\n            catch (e) {\n                return { data: null, error: e };\n            }\n        });\n    }\n    /**\n     * Logs in an OpenID Connect user using their id_token.\n     * @param id_token The IDToken of the user.\n     * @param nonce The nonce of the user. The nonce is a random value generated by the developer (= yourself) before the initial grant is started. You should check the OpenID Connect specification for details. https://openid.net/developers/specs/\n     * @param provider The provider of the user.\n     * @param client_id The clientID of the user.\n     * @param issuer The issuer of the user.\n     */\n    signInWithOpenIDConnect({ id_token, nonce, client_id, issuer, provider, }) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const headers = Object.assign({}, this.headers);\n                const queryString = '?grant_type=id_token';\n                const data = yield post(this.fetch, `${this.url}/token${queryString}`, { id_token, nonce, client_id, issuer, provider }, { headers });\n                const session = Object.assign({}, data);\n                if (session.expires_in)\n                    session.expires_at = expiresAt(data.expires_in);\n                return { data: session, error: null };\n            }\n            catch (e) {\n                return { data: null, error: e };\n            }\n        });\n    }\n    /**\n     * Sends a magic login link to an email address.\n     * @param email The email address of the user.\n     * @param shouldCreateUser A boolean flag to indicate whether to automatically create a user on magiclink / otp sign-ins if the user doesn't exist. Defaults to true.\n     * @param redirectTo A URL or mobile address to send the user to after they are confirmed.\n     */\n    sendMagicLinkEmail(email, options = {}) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const headers = Object.assign({}, this.headers);\n                let queryString = '';\n                if (options.redirectTo) {\n                    queryString += '?redirect_to=' + encodeURIComponent(options.redirectTo);\n                }\n                const shouldCreateUser = (_a = options.shouldCreateUser) !== null && _a !== void 0 ? _a : true;\n                const data = yield post(this.fetch, `${this.url}/otp${queryString}`, {\n                    email,\n                    create_user: shouldCreateUser,\n                    gotrue_meta_security: { captcha_token: options.captchaToken },\n                }, { headers });\n                return { data, error: null };\n            }\n            catch (e) {\n                return { data: null, error: e };\n            }\n        });\n    }\n    /**\n     * Sends a mobile OTP via SMS. Will register the account if it doesn't already exist\n     * @param phone The user's phone number WITH international prefix\n     * @param shouldCreateUser A boolean flag to indicate whether to automatically create a user on magiclink / otp sign-ins if the user doesn't exist. Defaults to true.\n     */\n    sendMobileOTP(phone, options = {}) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const shouldCreateUser = (_a = options.shouldCreateUser) !== null && _a !== void 0 ? _a : true;\n                const headers = Object.assign({}, this.headers);\n                const data = yield post(this.fetch, `${this.url}/otp`, {\n                    phone,\n                    create_user: shouldCreateUser,\n                    gotrue_meta_security: { captcha_token: options.captchaToken },\n                }, { headers });\n                return { data, error: null };\n            }\n            catch (e) {\n                return { data: null, error: e };\n            }\n        });\n    }\n    /**\n     * Removes a logged-in session.\n     * @param jwt A valid, logged-in JWT.\n     */\n    signOut(jwt) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                yield post(this.fetch, `${this.url}/logout`, {}, { headers: this._createRequestHeaders(jwt), noResolveJson: true });\n                return { error: null };\n            }\n            catch (e) {\n                return { error: e };\n            }\n        });\n    }\n    /**\n     * @deprecated Use `verifyOTP` instead!\n     * @param phone The user's phone number WITH international prefix\n     * @param token token that user was sent to their mobile phone\n     * @param redirectTo A URL or mobile address to send the user to after they are confirmed.\n     */\n    verifyMobileOTP(phone, token, options = {}) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const headers = Object.assign({}, this.headers);\n                const data = yield post(this.fetch, `${this.url}/verify`, { phone, token, type: 'sms', redirect_to: options.redirectTo }, { headers });\n                const session = Object.assign({}, data);\n                if (session.expires_in)\n                    session.expires_at = expiresAt(data.expires_in);\n                return { data: session, error: null };\n            }\n            catch (e) {\n                return { data: null, error: e };\n            }\n        });\n    }\n    /**\n     * Send User supplied Email / Mobile OTP to be verified\n     * @param email The user's email address\n     * @param phone The user's phone number WITH international prefix\n     * @param token token that user was sent to their mobile phone\n     * @param type verification type that the otp is generated for\n     * @param redirectTo A URL or mobile address to send the user to after they are confirmed.\n     */\n    verifyOTP({ email, phone, token, type = 'sms' }, options = {}) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const headers = Object.assign({}, this.headers);\n                const data = yield post(this.fetch, `${this.url}/verify`, { email, phone, token, type, redirect_to: options.redirectTo }, { headers });\n                const session = Object.assign({}, data);\n                if (session.expires_in)\n                    session.expires_at = expiresAt(data.expires_in);\n                return { data: session, error: null };\n            }\n            catch (e) {\n                return { data: null, error: e };\n            }\n        });\n    }\n    /**\n     * Sends an invite link to an email address.\n     * @param email The email address of the user.\n     * @param redirectTo A URL or mobile address to send the user to after they are confirmed.\n     * @param data Optional user metadata\n     */\n    inviteUserByEmail(email, options = {}) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const headers = Object.assign({}, this.headers);\n                let queryString = '';\n                if (options.redirectTo) {\n                    queryString += '?redirect_to=' + encodeURIComponent(options.redirectTo);\n                }\n                const data = yield post(this.fetch, `${this.url}/invite${queryString}`, { email, data: options.data }, { headers });\n                return { data, error: null };\n            }\n            catch (e) {\n                return { data: null, error: e };\n            }\n        });\n    }\n    /**\n     * Sends a reset request to an email address.\n     * @param email The email address of the user.\n     * @param redirectTo A URL or mobile address to send the user to after they are confirmed.\n     */\n    resetPasswordForEmail(email, options = {}) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const headers = Object.assign({}, this.headers);\n                let queryString = '';\n                if (options.redirectTo) {\n                    queryString += '?redirect_to=' + encodeURIComponent(options.redirectTo);\n                }\n                const data = yield post(this.fetch, `${this.url}/recover${queryString}`, { email, gotrue_meta_security: { captcha_token: options.captchaToken } }, { headers });\n                return { data, error: null };\n            }\n            catch (e) {\n                return { data: null, error: e };\n            }\n        });\n    }\n    /**\n     * Generates a new JWT.\n     * @param refreshToken A valid refresh token that was returned on login.\n     */\n    refreshAccessToken(refreshToken) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const data = yield post(this.fetch, `${this.url}/token?grant_type=refresh_token`, { refresh_token: refreshToken }, { headers: this.headers });\n                const session = Object.assign({}, data);\n                if (session.expires_in)\n                    session.expires_at = expiresAt(data.expires_in);\n                return { data: session, error: null };\n            }\n            catch (e) {\n                return { data: null, error: e };\n            }\n        });\n    }\n    /**\n     * Set/delete the auth cookie based on the AuthChangeEvent.\n     * Works for Next.js & Express (requires cookie-parser middleware).\n     * @param req The request object.\n     * @param res The response object.\n     */\n    setAuthCookie(req, res) {\n        if (req.method !== 'POST') {\n            res.setHeader('Allow', 'POST');\n            res.status(405).end('Method Not Allowed');\n        }\n        const { event, session } = req.body;\n        if (!event)\n            throw new Error('Auth event missing!');\n        if (event === 'SIGNED_IN') {\n            if (!session)\n                throw new Error('Auth session missing!');\n            setCookies(req, res, [\n                { key: 'access-token', value: session.access_token },\n                { key: 'refresh-token', value: session.refresh_token },\n            ].map((token) => {\n                var _a;\n                return ({\n                    name: `${this.cookieName()}-${token.key}`,\n                    value: token.value,\n                    domain: this.cookieOptions.domain,\n                    maxAge: (_a = this.cookieOptions.lifetime) !== null && _a !== void 0 ? _a : 0,\n                    path: this.cookieOptions.path,\n                    sameSite: this.cookieOptions.sameSite,\n                });\n            }));\n        }\n        if (event === 'SIGNED_OUT') {\n            setCookies(req, res, ['access-token', 'refresh-token'].map((key) => ({\n                name: `${this.cookieName()}-${key}`,\n                value: '',\n                maxAge: -1,\n            })));\n        }\n        res.status(200).json({});\n    }\n    /**\n     * Deletes the Auth Cookies and redirects to the\n     * @param req The request object.\n     * @param res The response object.\n     * @param options Optionally specify a `redirectTo` URL in the options.\n     */\n    deleteAuthCookie(req, res, { redirectTo = '/' }) {\n        setCookies(req, res, ['access-token', 'refresh-token'].map((key) => ({\n            name: `${this.cookieName()}-${key}`,\n            value: '',\n            maxAge: -1,\n        })));\n        return res.redirect(307, redirectTo);\n    }\n    /**\n     * Helper method to generate the Auth Cookie string for you in case you can't use `setAuthCookie`.\n     * @param req The request object.\n     * @param res The response object.\n     * @returns The Cookie string that needs to be set as the value for the `Set-Cookie` header.\n     */\n    getAuthCookieString(req, res) {\n        if (req.method !== 'POST') {\n            res.setHeader('Allow', 'POST');\n            res.status(405).end('Method Not Allowed');\n        }\n        const { event, session } = req.body;\n        if (!event)\n            throw new Error('Auth event missing!');\n        if (event === 'SIGNED_IN') {\n            if (!session)\n                throw new Error('Auth session missing!');\n            return getCookieString(req, res, [\n                { key: 'access-token', value: session.access_token },\n                { key: 'refresh-token', value: session.refresh_token },\n            ].map((token) => {\n                var _a;\n                return ({\n                    name: `${this.cookieName()}-${token.key}`,\n                    value: token.value,\n                    domain: this.cookieOptions.domain,\n                    maxAge: (_a = this.cookieOptions.lifetime) !== null && _a !== void 0 ? _a : 0,\n                    path: this.cookieOptions.path,\n                    sameSite: this.cookieOptions.sameSite,\n                });\n            }));\n        }\n        if (event === 'SIGNED_OUT') {\n            return getCookieString(req, res, ['access-token', 'refresh-token'].map((key) => ({\n                name: `${this.cookieName()}-${key}`,\n                value: '',\n                maxAge: -1,\n            })));\n        }\n        return res.getHeader('Set-Cookie');\n    }\n    /**\n     * Generates links to be sent via email or other.\n     * @param type The link type (\"signup\" or \"magiclink\" or \"recovery\" or \"invite\").\n     * @param email The user's email.\n     * @param password User password. For signup only.\n     * @param data Optional user metadata. For signup only.\n     * @param redirectTo The link type (\"signup\" or \"magiclink\" or \"recovery\" or \"invite\").\n     */\n    generateLink(type, email, options = {}) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const data = yield post(this.fetch, `${this.url}/admin/generate_link`, {\n                    type,\n                    email,\n                    password: options.password,\n                    data: options.data,\n                    redirect_to: options.redirectTo,\n                }, { headers: this.headers });\n                return { data, error: null };\n            }\n            catch (e) {\n                return { data: null, error: e };\n            }\n        });\n    }\n    // User Admin API\n    /**\n     * Creates a new user.\n     *\n     * This function should only be called on a server. Never expose your `service_role` key in the browser.\n     *\n     * @param attributes The data you want to create the user with.\n     */\n    createUser(attributes) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const data = yield post(this.fetch, `${this.url}/admin/users`, attributes, {\n                    headers: this.headers,\n                });\n                return { user: data, data, error: null };\n            }\n            catch (e) {\n                return { user: null, data: null, error: e };\n            }\n        });\n    }\n    /**\n     * Get a list of users.\n     *\n     * This function should only be called on a server. Never expose your `service_role` key in the browser.\n     */\n    listUsers() {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const data = yield get(this.fetch, `${this.url}/admin/users`, {\n                    headers: this.headers,\n                });\n                return { data: data.users, error: null };\n            }\n            catch (e) {\n                return { data: null, error: e };\n            }\n        });\n    }\n    /**\n     * Get user by id.\n     *\n     * @param uid The user's unique identifier\n     *\n     * This function should only be called on a server. Never expose your `service_role` key in the browser.\n     */\n    getUserById(uid) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const data = yield get(this.fetch, `${this.url}/admin/users/${uid}`, {\n                    headers: this.headers,\n                });\n                return { data, error: null };\n            }\n            catch (e) {\n                return { data: null, error: e };\n            }\n        });\n    }\n    /**\n     * Get user by reading the cookie from the request.\n     * Works for Next.js & Express (requires cookie-parser middleware).\n     */\n    getUserByCookie(req, res) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                if (!req.cookies) {\n                    throw new Error('Not able to parse cookies! When using Express make sure the cookie-parser middleware is in use!');\n                }\n                const access_token = req.cookies[`${this.cookieName()}-access-token`];\n                const refresh_token = req.cookies[`${this.cookieName()}-refresh-token`];\n                if (!access_token) {\n                    throw new Error('No cookie found!');\n                }\n                const { user, error: getUserError } = yield this.getUser(access_token);\n                if (getUserError) {\n                    if (!refresh_token)\n                        throw new Error('No refresh_token cookie found!');\n                    if (!res)\n                        throw new Error('You need to pass the res object to automatically refresh the session!');\n                    const { data, error } = yield this.refreshAccessToken(refresh_token);\n                    if (error) {\n                        throw error;\n                    }\n                    else if (data) {\n                        setCookies(req, res, [\n                            { key: 'access-token', value: data.access_token },\n                            { key: 'refresh-token', value: data.refresh_token },\n                        ].map((token) => {\n                            var _a;\n                            return ({\n                                name: `${this.cookieName()}-${token.key}`,\n                                value: token.value,\n                                domain: this.cookieOptions.domain,\n                                maxAge: (_a = this.cookieOptions.lifetime) !== null && _a !== void 0 ? _a : 0,\n                                path: this.cookieOptions.path,\n                                sameSite: this.cookieOptions.sameSite,\n                            });\n                        }));\n                        return { token: data.access_token, user: data.user, data: data.user, error: null };\n                    }\n                }\n                return { token: access_token, user: user, data: user, error: null };\n            }\n            catch (e) {\n                return { token: null, user: null, data: null, error: e };\n            }\n        });\n    }\n    /**\n     * Updates the user data.\n     *\n     * @param attributes The data you want to update.\n     *\n     * This function should only be called on a server. Never expose your `service_role` key in the browser.\n     */\n    updateUserById(uid, attributes) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                this; //\n                const data = yield put(this.fetch, `${this.url}/admin/users/${uid}`, attributes, {\n                    headers: this.headers,\n                });\n                return { user: data, data, error: null };\n            }\n            catch (e) {\n                return { user: null, data: null, error: e };\n            }\n        });\n    }\n    /**\n     * Delete a user. Requires a `service_role` key.\n     *\n     * This function should only be called on a server. Never expose your `service_role` key in the browser.\n     *\n     * @param uid The user uid you want to remove.\n     */\n    deleteUser(uid) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const data = yield remove(this.fetch, `${this.url}/admin/users/${uid}`, {}, {\n                    headers: this.headers,\n                });\n                return { user: data, data, error: null };\n            }\n            catch (e) {\n                return { user: null, data: null, error: e };\n            }\n        });\n    }\n    /**\n     * Gets the current user details.\n     *\n     * This method is called by the GoTrueClient `update` where\n     * the jwt is set to this.currentSession.access_token\n     * and therefore, acts like getting the currently authenticated user\n     *\n     * @param jwt A valid, logged-in JWT. Typically, the access_token for the currentSession\n     */\n    getUser(jwt) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const data = yield get(this.fetch, `${this.url}/user`, {\n                    headers: this._createRequestHeaders(jwt),\n                });\n                return { user: data, data, error: null };\n            }\n            catch (e) {\n                return { user: null, data: null, error: e };\n            }\n        });\n    }\n    /**\n     * Updates the user data.\n     * @param jwt A valid, logged-in JWT.\n     * @param attributes The data you want to update.\n     */\n    updateUser(jwt, attributes) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const data = yield put(this.fetch, `${this.url}/user`, attributes, {\n                    headers: this._createRequestHeaders(jwt),\n                });\n                return { user: data, data, error: null };\n            }\n            catch (e) {\n                return { user: null, data: null, error: e };\n            }\n        });\n    }\n}\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport GoTrueApi from './GoTrueApi';\nimport { isBrowser, getParameterByName, uuid, setItemAsync, removeItemAsync, getItemSynchronously, getItemAsync, } from './lib/helpers';\nimport { GOTRUE_URL, DEFAULT_HEADERS, STORAGE_KEY, EXPIRY_MARGIN, NETWORK_FAILURE, } from './lib/constants';\nimport { polyfillGlobalThis } from './lib/polyfills';\npolyfillGlobalThis(); // Make \"globalThis\" available\nconst DEFAULT_OPTIONS = {\n    url: GOTRUE_URL,\n    autoRefreshToken: true,\n    persistSession: true,\n    detectSessionInUrl: true,\n    multiTab: true,\n    headers: DEFAULT_HEADERS,\n};\nexport default class GoTrueClient {\n    /**\n     * Create a new client for use in the browser.\n     * @param options.url The URL of the GoTrue server.\n     * @param options.headers Any additional headers to send to the GoTrue server.\n     * @param options.detectSessionInUrl Set to \"true\" if you want to automatically detects OAuth grants in the URL and signs in the user.\n     * @param options.autoRefreshToken Set to \"true\" if you want to automatically refresh the token before expiring.\n     * @param options.persistSession Set to \"true\" if you want to automatically save the user session into local storage.\n     * @param options.localStorage Provide your own local storage implementation to use instead of the browser's local storage.\n     * @param options.multiTab Set to \"false\" if you want to disable multi-tab/window events.\n     * @param options.cookieOptions\n     * @param options.fetch A custom fetch implementation.\n     */\n    constructor(options) {\n        this.stateChangeEmitters = new Map();\n        this.networkRetries = 0;\n        const settings = Object.assign(Object.assign({}, DEFAULT_OPTIONS), options);\n        this.currentUser = null;\n        this.currentSession = null;\n        this.autoRefreshToken = settings.autoRefreshToken;\n        this.persistSession = settings.persistSession;\n        this.multiTab = settings.multiTab;\n        this.localStorage = settings.localStorage || globalThis.localStorage;\n        this.api = new GoTrueApi({\n            url: settings.url,\n            headers: settings.headers,\n            cookieOptions: settings.cookieOptions,\n            fetch: settings.fetch,\n        });\n        this._recoverSession();\n        this._recoverAndRefresh();\n        this._listenForMultiTabEvents();\n        this._handleVisibilityChange();\n        if (settings.detectSessionInUrl && isBrowser() && !!getParameterByName('access_token')) {\n            // Handle the OAuth redirect\n            this.getSessionFromUrl({ storeSession: true }).then(({ error }) => {\n                if (error) {\n                    console.error('Error getting session from URL.', error);\n                }\n            });\n        }\n    }\n    /**\n     * Creates a new user.\n     * @type UserCredentials\n     * @param email The user's email address.\n     * @param password The user's password.\n     * @param phone The user's phone number.\n     * @param redirectTo The redirect URL attached to the signup confirmation link. Does not redirect the user if it's a mobile signup.\n     * @param data Optional user metadata.\n     */\n    signUp({ email, password, phone }, options = {}) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                this._removeSession();\n                const { data, error } = phone && password\n                    ? yield this.api.signUpWithPhone(phone, password, {\n                        data: options.data,\n                        captchaToken: options.captchaToken,\n                    })\n                    : yield this.api.signUpWithEmail(email, password, {\n                        redirectTo: options.redirectTo,\n                        data: options.data,\n                        captchaToken: options.captchaToken,\n                    });\n                if (error) {\n                    throw error;\n                }\n                if (!data) {\n                    throw 'An error occurred on sign up.';\n                }\n                let session = null;\n                let user = null;\n                if (data.access_token) {\n                    session = data;\n                    user = session.user;\n                    this._saveSession(session);\n                    this._notifyAllSubscribers('SIGNED_IN');\n                }\n                if (data.id) {\n                    user = data;\n                }\n                return { user, session, error: null };\n            }\n            catch (e) {\n                return { user: null, session: null, error: e };\n            }\n        });\n    }\n    /**\n     * Log in an existing user, or login via a third-party provider.\n     * @type UserCredentials\n     * @param email The user's email address.\n     * @param phone The user's phone number.\n     * @param password The user's password.\n     * @param refreshToken A valid refresh token that was returned on login.\n     * @param provider One of the providers supported by GoTrue.\n     * @param redirectTo A URL to send the user to after they are confirmed (OAuth logins only).\n     * @param shouldCreateUser A boolean flag to indicate whether to automatically create a user on magiclink / otp sign-ins if the user doesn't exist. Defaults to true.\n     * @param scopes A space-separated list of scopes granted to the OAuth application.\n     */\n    signIn({ email, phone, password, refreshToken, provider, oidc }, options = {}) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                this._removeSession();\n                if (email && !password) {\n                    const { error } = yield this.api.sendMagicLinkEmail(email, {\n                        redirectTo: options.redirectTo,\n                        shouldCreateUser: options.shouldCreateUser,\n                        captchaToken: options.captchaToken,\n                    });\n                    return { user: null, session: null, error };\n                }\n                if (email && password) {\n                    return this._handleEmailSignIn(email, password, {\n                        redirectTo: options.redirectTo,\n                    });\n                }\n                if (phone && !password) {\n                    const { error } = yield this.api.sendMobileOTP(phone, {\n                        shouldCreateUser: options.shouldCreateUser,\n                        captchaToken: options.captchaToken,\n                    });\n                    return { user: null, session: null, error };\n                }\n                if (phone && password) {\n                    return this._handlePhoneSignIn(phone, password);\n                }\n                if (refreshToken) {\n                    // currentSession and currentUser will be updated to latest on _callRefreshToken using the passed refreshToken\n                    const { error } = yield this._callRefreshToken(refreshToken);\n                    if (error)\n                        throw error;\n                    return {\n                        user: this.currentUser,\n                        session: this.currentSession,\n                        error: null,\n                    };\n                }\n                if (provider) {\n                    return this._handleProviderSignIn(provider, {\n                        redirectTo: options.redirectTo,\n                        scopes: options.scopes,\n                        queryParams: options.queryParams,\n                    });\n                }\n                if (oidc) {\n                    return this._handleOpenIDConnectSignIn(oidc);\n                }\n                throw new Error(`You must provide either an email, phone number, a third-party provider or OpenID Connect.`);\n            }\n            catch (e) {\n                return { user: null, session: null, error: e };\n            }\n        });\n    }\n    /**\n     * Log in a user given a User supplied OTP received via mobile.\n     * @param email The user's email address.\n     * @param phone The user's phone number.\n     * @param token The user's password.\n     * @param type The user's verification type.\n     * @param redirectTo A URL or mobile address to send the user to after they are confirmed.\n     */\n    verifyOTP(params, options = {}) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                this._removeSession();\n                const { data, error } = yield this.api.verifyOTP(params, options);\n                if (error) {\n                    throw error;\n                }\n                if (!data) {\n                    throw 'An error occurred on token verification.';\n                }\n                let session = null;\n                let user = null;\n                if (data.access_token) {\n                    session = data;\n                    user = session.user;\n                    this._saveSession(session);\n                    this._notifyAllSubscribers('SIGNED_IN');\n                }\n                if (data.id) {\n                    user = data;\n                }\n                return { user, session, error: null };\n            }\n            catch (e) {\n                return { user: null, session: null, error: e };\n            }\n        });\n    }\n    /**\n     * Inside a browser context, `user()` will return the user data, if there is a logged in user.\n     *\n     * For server-side management, you can get a user through `auth.api.getUserByCookie()`\n     */\n    user() {\n        return this.currentUser;\n    }\n    /**\n     * Returns the session data, if there is an active session.\n     */\n    session() {\n        return this.currentSession;\n    }\n    /**\n     * Force refreshes the session including the user data in case it was updated in a different session.\n     */\n    refreshSession() {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                if (!((_a = this.currentSession) === null || _a === void 0 ? void 0 : _a.access_token))\n                    throw new Error('Not logged in.');\n                // currentSession and currentUser will be updated to latest on _callRefreshToken\n                const { error } = yield this._callRefreshToken();\n                if (error)\n                    throw error;\n                return { data: this.currentSession, user: this.currentUser, error: null };\n            }\n            catch (e) {\n                return { data: null, user: null, error: e };\n            }\n        });\n    }\n    /**\n     * Updates user data, if there is a logged in user.\n     */\n    update(attributes) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                if (!((_a = this.currentSession) === null || _a === void 0 ? void 0 : _a.access_token))\n                    throw new Error('Not logged in.');\n                const { user, error } = yield this.api.updateUser(this.currentSession.access_token, attributes);\n                if (error)\n                    throw error;\n                if (!user)\n                    throw Error('Invalid user data.');\n                const session = Object.assign(Object.assign({}, this.currentSession), { user });\n                this._saveSession(session);\n                this._notifyAllSubscribers('USER_UPDATED');\n                return { data: user, user, error: null };\n            }\n            catch (e) {\n                return { data: null, user: null, error: e };\n            }\n        });\n    }\n    /**\n     * Sets the session data from refresh_token and returns current Session and Error\n     * @param refresh_token a JWT token\n     */\n    setSession(refresh_token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                if (!refresh_token) {\n                    throw new Error('No current session.');\n                }\n                const { data, error } = yield this.api.refreshAccessToken(refresh_token);\n                if (error) {\n                    return { session: null, error: error };\n                }\n                this._saveSession(data);\n                this._notifyAllSubscribers('SIGNED_IN');\n                return { session: data, error: null };\n            }\n            catch (e) {\n                return { error: e, session: null };\n            }\n        });\n    }\n    /**\n     * Overrides the JWT on the current client. The JWT will then be sent in all subsequent network requests.\n     * @param access_token a jwt access token\n     */\n    setAuth(access_token) {\n        this.currentSession = Object.assign(Object.assign({}, this.currentSession), { access_token, token_type: 'bearer', user: this.user() });\n        this._notifyAllSubscribers('TOKEN_REFRESHED');\n        return this.currentSession;\n    }\n    /**\n     * Gets the session data from a URL string\n     * @param options.storeSession Optionally store the session in the browser\n     */\n    getSessionFromUrl(options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                if (!isBrowser())\n                    throw new Error('No browser detected.');\n                const error_description = getParameterByName('error_description');\n                if (error_description)\n                    throw new Error(error_description);\n                const provider_token = getParameterByName('provider_token');\n                const access_token = getParameterByName('access_token');\n                if (!access_token)\n                    throw new Error('No access_token detected.');\n                const expires_in = getParameterByName('expires_in');\n                if (!expires_in)\n                    throw new Error('No expires_in detected.');\n                const refresh_token = getParameterByName('refresh_token');\n                if (!refresh_token)\n                    throw new Error('No refresh_token detected.');\n                const token_type = getParameterByName('token_type');\n                if (!token_type)\n                    throw new Error('No token_type detected.');\n                const timeNow = Math.round(Date.now() / 1000);\n                const expires_at = timeNow + parseInt(expires_in);\n                const { user, error } = yield this.api.getUser(access_token);\n                if (error)\n                    throw error;\n                const session = {\n                    provider_token,\n                    access_token,\n                    expires_in: parseInt(expires_in),\n                    expires_at,\n                    refresh_token,\n                    token_type,\n                    user: user,\n                };\n                if (options === null || options === void 0 ? void 0 : options.storeSession) {\n                    this._saveSession(session);\n                    const recoveryMode = getParameterByName('type');\n                    this._notifyAllSubscribers('SIGNED_IN');\n                    if (recoveryMode === 'recovery') {\n                        this._notifyAllSubscribers('PASSWORD_RECOVERY');\n                    }\n                }\n                // Remove tokens from URL\n                window.location.hash = '';\n                return { data: session, error: null };\n            }\n            catch (e) {\n                return { data: null, error: e };\n            }\n        });\n    }\n    /**\n     * Inside a browser context, `signOut()` will remove the logged in user from the browser session\n     * and log them out - removing all items from localstorage and then trigger a \"SIGNED_OUT\" event.\n     *\n     * For server-side management, you can disable sessions by passing a JWT through to `auth.api.signOut(JWT: string)`\n     */\n    signOut() {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            const accessToken = (_a = this.currentSession) === null || _a === void 0 ? void 0 : _a.access_token;\n            this._removeSession();\n            this._notifyAllSubscribers('SIGNED_OUT');\n            if (accessToken) {\n                const { error } = yield this.api.signOut(accessToken);\n                if (error)\n                    return { error };\n            }\n            return { error: null };\n        });\n    }\n    /**\n     * Receive a notification every time an auth event happens.\n     * @returns {Subscription} A subscription object which can be used to unsubscribe itself.\n     */\n    onAuthStateChange(callback) {\n        try {\n            const id = uuid();\n            const subscription = {\n                id,\n                callback,\n                unsubscribe: () => {\n                    this.stateChangeEmitters.delete(id);\n                },\n            };\n            this.stateChangeEmitters.set(id, subscription);\n            return { data: subscription, error: null };\n        }\n        catch (e) {\n            return { data: null, error: e };\n        }\n    }\n    _handleEmailSignIn(email, password, options = {}) {\n        var _a, _b;\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const { data, error } = yield this.api.signInWithEmail(email, password, {\n                    redirectTo: options.redirectTo,\n                });\n                if (error || !data)\n                    return { data: null, user: null, session: null, error };\n                if (((_a = data === null || data === void 0 ? void 0 : data.user) === null || _a === void 0 ? void 0 : _a.confirmed_at) || ((_b = data === null || data === void 0 ? void 0 : data.user) === null || _b === void 0 ? void 0 : _b.email_confirmed_at)) {\n                    this._saveSession(data);\n                    this._notifyAllSubscribers('SIGNED_IN');\n                }\n                return { data, user: data.user, session: data, error: null };\n            }\n            catch (e) {\n                return { data: null, user: null, session: null, error: e };\n            }\n        });\n    }\n    _handlePhoneSignIn(phone, password) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const { data, error } = yield this.api.signInWithPhone(phone, password);\n                if (error || !data)\n                    return { data: null, user: null, session: null, error };\n                if ((_a = data === null || data === void 0 ? void 0 : data.user) === null || _a === void 0 ? void 0 : _a.phone_confirmed_at) {\n                    this._saveSession(data);\n                    this._notifyAllSubscribers('SIGNED_IN');\n                }\n                return { data, user: data.user, session: data, error: null };\n            }\n            catch (e) {\n                return { data: null, user: null, session: null, error: e };\n            }\n        });\n    }\n    _handleProviderSignIn(provider, options = {}) {\n        const url = this.api.getUrlForProvider(provider, {\n            redirectTo: options.redirectTo,\n            scopes: options.scopes,\n            queryParams: options.queryParams,\n        });\n        try {\n            // try to open on the browser\n            if (isBrowser()) {\n                window.location.href = url;\n            }\n            return { provider, url, data: null, session: null, user: null, error: null };\n        }\n        catch (e) {\n            // fallback to returning the URL\n            if (url)\n                return { provider, url, data: null, session: null, user: null, error: null };\n            return { data: null, user: null, session: null, error: e };\n        }\n    }\n    _handleOpenIDConnectSignIn({ id_token, nonce, client_id, issuer, provider, }) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (id_token && nonce && ((client_id && issuer) || provider)) {\n                try {\n                    const { data, error } = yield this.api.signInWithOpenIDConnect({\n                        id_token,\n                        nonce,\n                        client_id,\n                        issuer,\n                        provider,\n                    });\n                    if (error || !data)\n                        return { user: null, session: null, error };\n                    this._saveSession(data);\n                    this._notifyAllSubscribers('SIGNED_IN');\n                    return { user: data.user, session: data, error: null };\n                }\n                catch (e) {\n                    return { user: null, session: null, error: e };\n                }\n            }\n            throw new Error(`You must provide a OpenID Connect provider with your id token and nonce.`);\n        });\n    }\n    /**\n     * Attempts to get the session from LocalStorage\n     * Note: this should never be async (even for React Native), as we need it to return immediately in the constructor.\n     */\n    _recoverSession() {\n        try {\n            const data = getItemSynchronously(this.localStorage, STORAGE_KEY);\n            if (!data)\n                return null;\n            const { currentSession, expiresAt } = data;\n            const timeNow = Math.round(Date.now() / 1000);\n            if (expiresAt >= timeNow + EXPIRY_MARGIN && (currentSession === null || currentSession === void 0 ? void 0 : currentSession.user)) {\n                this._saveSession(currentSession);\n                this._notifyAllSubscribers('SIGNED_IN');\n            }\n        }\n        catch (error) {\n            console.log('error', error);\n        }\n    }\n    /**\n     * Recovers the session from LocalStorage and refreshes\n     * Note: this method is async to accommodate for AsyncStorage e.g. in React native.\n     */\n    _recoverAndRefresh() {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const data = yield getItemAsync(this.localStorage, STORAGE_KEY);\n                if (!data)\n                    return null;\n                const { currentSession, expiresAt } = data;\n                const timeNow = Math.round(Date.now() / 1000);\n                if (expiresAt < timeNow + EXPIRY_MARGIN) {\n                    if (this.autoRefreshToken && currentSession.refresh_token) {\n                        this.networkRetries++;\n                        const { error } = yield this._callRefreshToken(currentSession.refresh_token);\n                        if (error) {\n                            console.log(error.message);\n                            if (error.message === NETWORK_FAILURE.ERROR_MESSAGE &&\n                                this.networkRetries < NETWORK_FAILURE.MAX_RETRIES) {\n                                if (this.refreshTokenTimer)\n                                    clearTimeout(this.refreshTokenTimer);\n                                this.refreshTokenTimer = setTimeout(() => this._recoverAndRefresh(), Math.pow(NETWORK_FAILURE.RETRY_INTERVAL, this.networkRetries) * 100 // exponential backoff\n                                );\n                                return;\n                            }\n                            yield this._removeSession();\n                        }\n                        this.networkRetries = 0;\n                    }\n                    else {\n                        this._removeSession();\n                    }\n                }\n                else if (!currentSession) {\n                    console.log('Current session is missing data.');\n                    this._removeSession();\n                }\n                else {\n                    // should be handled on _recoverSession method already\n                    // But we still need the code here to accommodate for AsyncStorage e.g. in React native\n                    this._saveSession(currentSession);\n                    this._notifyAllSubscribers('SIGNED_IN');\n                }\n            }\n            catch (err) {\n                console.error(err);\n                return null;\n            }\n        });\n    }\n    _callRefreshToken(refresh_token) {\n        var _a;\n        if (refresh_token === void 0) { refresh_token = (_a = this.currentSession) === null || _a === void 0 ? void 0 : _a.refresh_token; }\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                if (!refresh_token) {\n                    throw new Error('No current session.');\n                }\n                const { data, error } = yield this.api.refreshAccessToken(refresh_token);\n                if (error)\n                    throw error;\n                if (!data)\n                    throw Error('Invalid session data.');\n                this._saveSession(data);\n                this._notifyAllSubscribers('TOKEN_REFRESHED');\n                this._notifyAllSubscribers('SIGNED_IN');\n                return { data, error: null };\n            }\n            catch (e) {\n                return { data: null, error: e };\n            }\n        });\n    }\n    _notifyAllSubscribers(event) {\n        this.stateChangeEmitters.forEach((x) => x.callback(event, this.currentSession));\n    }\n    /**\n     * set currentSession and currentUser\n     * process to _startAutoRefreshToken if possible\n     */\n    _saveSession(session) {\n        this.currentSession = session;\n        this.currentUser = session.user;\n        const expiresAt = session.expires_at;\n        if (expiresAt) {\n            const timeNow = Math.round(Date.now() / 1000);\n            const expiresIn = expiresAt - timeNow;\n            const refreshDurationBeforeExpires = expiresIn > EXPIRY_MARGIN ? EXPIRY_MARGIN : 0.5;\n            this._startAutoRefreshToken((expiresIn - refreshDurationBeforeExpires) * 1000);\n        }\n        // Do we need any extra check before persist session\n        // access_token or user ?\n        if (this.persistSession && session.expires_at) {\n            this._persistSession(this.currentSession);\n        }\n    }\n    _persistSession(currentSession) {\n        const data = { currentSession, expiresAt: currentSession.expires_at };\n        setItemAsync(this.localStorage, STORAGE_KEY, data);\n    }\n    _removeSession() {\n        return __awaiter(this, void 0, void 0, function* () {\n            this.currentSession = null;\n            this.currentUser = null;\n            if (this.refreshTokenTimer)\n                clearTimeout(this.refreshTokenTimer);\n            removeItemAsync(this.localStorage, STORAGE_KEY);\n        });\n    }\n    /**\n     * Clear and re-create refresh token timer\n     * @param value time intervals in milliseconds\n     */\n    _startAutoRefreshToken(value) {\n        if (this.refreshTokenTimer)\n            clearTimeout(this.refreshTokenTimer);\n        if (value <= 0 || !this.autoRefreshToken)\n            return;\n        this.refreshTokenTimer = setTimeout(() => __awaiter(this, void 0, void 0, function* () {\n            this.networkRetries++;\n            const { error } = yield this._callRefreshToken();\n            if (!error)\n                this.networkRetries = 0;\n            if ((error === null || error === void 0 ? void 0 : error.message) === NETWORK_FAILURE.ERROR_MESSAGE &&\n                this.networkRetries < NETWORK_FAILURE.MAX_RETRIES)\n                this._startAutoRefreshToken(Math.pow(NETWORK_FAILURE.RETRY_INTERVAL, this.networkRetries) * 100); // exponential backoff\n        }), value);\n        if (typeof this.refreshTokenTimer.unref === 'function')\n            this.refreshTokenTimer.unref();\n    }\n    /**\n     * Listens for changes to LocalStorage and updates the current session.\n     */\n    _listenForMultiTabEvents() {\n        if (!this.multiTab || !isBrowser() || !(window === null || window === void 0 ? void 0 : window.addEventListener)) {\n            return false;\n        }\n        try {\n            window === null || window === void 0 ? void 0 : window.addEventListener('storage', (e) => {\n                var _a;\n                if (e.key === STORAGE_KEY) {\n                    const newSession = JSON.parse(String(e.newValue));\n                    if ((_a = newSession === null || newSession === void 0 ? void 0 : newSession.currentSession) === null || _a === void 0 ? void 0 : _a.access_token) {\n                        this._saveSession(newSession.currentSession);\n                        this._notifyAllSubscribers('SIGNED_IN');\n                    }\n                    else {\n                        this._removeSession();\n                        this._notifyAllSubscribers('SIGNED_OUT');\n                    }\n                }\n            });\n        }\n        catch (error) {\n            console.error('_listenForMultiTabEvents', error);\n        }\n    }\n    _handleVisibilityChange() {\n        if (!this.multiTab || !isBrowser() || !(window === null || window === void 0 ? void 0 : window.addEventListener)) {\n            return false;\n        }\n        try {\n            window === null || window === void 0 ? void 0 : window.addEventListener('visibilitychange', () => {\n                if (document.visibilityState === 'visible') {\n                    this._recoverAndRefresh();\n                }\n            });\n        }\n        catch (error) {\n            console.error('_handleVisibilityChange', error);\n        }\n    }\n}\n","import GoTrueApi from './GoTrueApi';\nimport GoTrueClient from './GoTrueClient';\nexport { GoTrueApi, GoTrueClient };\nexport * from './lib/types';\n","import { version } from './version';\nexport const GOTRUE_URL = 'http://localhost:9999';\nexport const AUDIENCE = '';\nexport const DEFAULT_HEADERS = { 'X-Client-Info': `gotrue-js/${version}` };\nexport const EXPIRY_MARGIN = 10; // in seconds\nexport const NETWORK_FAILURE = {\n    ERROR_MESSAGE: 'Request Failed',\n    MAX_RETRIES: 10,\n    RETRY_INTERVAL: 2, // in deciseconds\n};\nexport const STORAGE_KEY = 'supabase.auth.token';\nexport const COOKIE_OPTIONS = {\n    name: 'sb',\n    lifetime: 60 * 60 * 8,\n    domain: '',\n    path: '/',\n    sameSite: 'lax',\n};\n","/**\n * Serialize data into a cookie header.\n */\nfunction serialize(name, val, options) {\n    const opt = options || {};\n    const enc = encodeURIComponent;\n    /* eslint-disable-next-line no-control-regex */\n    const fieldContentRegExp = /^[\\u0009\\u0020-\\u007e\\u0080-\\u00ff]+$/;\n    if (typeof enc !== 'function') {\n        throw new TypeError('option encode is invalid');\n    }\n    if (!fieldContentRegExp.test(name)) {\n        throw new TypeError('argument name is invalid');\n    }\n    const value = enc(val);\n    if (value && !fieldContentRegExp.test(value)) {\n        throw new TypeError('argument val is invalid');\n    }\n    let str = name + '=' + value;\n    if (null != opt.maxAge) {\n        const maxAge = opt.maxAge - 0;\n        if (isNaN(maxAge) || !isFinite(maxAge)) {\n            throw new TypeError('option maxAge is invalid');\n        }\n        str += '; Max-Age=' + Math.floor(maxAge);\n    }\n    if (opt.domain) {\n        if (!fieldContentRegExp.test(opt.domain)) {\n            throw new TypeError('option domain is invalid');\n        }\n        str += '; Domain=' + opt.domain;\n    }\n    if (opt.path) {\n        if (!fieldContentRegExp.test(opt.path)) {\n            throw new TypeError('option path is invalid');\n        }\n        str += '; Path=' + opt.path;\n    }\n    if (opt.expires) {\n        if (typeof opt.expires.toUTCString !== 'function') {\n            throw new TypeError('option expires is invalid');\n        }\n        str += '; Expires=' + opt.expires.toUTCString();\n    }\n    if (opt.httpOnly) {\n        str += '; HttpOnly';\n    }\n    if (opt.secure) {\n        str += '; Secure';\n    }\n    if (opt.sameSite) {\n        const sameSite = typeof opt.sameSite === 'string' ? opt.sameSite.toLowerCase() : opt.sameSite;\n        switch (sameSite) {\n            case 'lax':\n                str += '; SameSite=Lax';\n                break;\n            case 'strict':\n                str += '; SameSite=Strict';\n                break;\n            case 'none':\n                str += '; SameSite=None';\n                break;\n            default:\n                throw new TypeError('option sameSite is invalid');\n        }\n    }\n    return str;\n}\n/**\n * Based on the environment and the request we know if a secure cookie can be set.\n */\nfunction isSecureEnvironment(req) {\n    if (!req || !req.headers || !req.headers.host) {\n        throw new Error('The \"host\" request header is not available');\n    }\n    const host = (req.headers.host.indexOf(':') > -1 && req.headers.host.split(':')[0]) || req.headers.host;\n    if (['localhost', '127.0.0.1'].indexOf(host) > -1 || host.endsWith('.local')) {\n        return false;\n    }\n    return true;\n}\n/**\n * Serialize a cookie to a string.\n */\nfunction serializeCookie(cookie, secure) {\n    var _a, _b, _c;\n    return serialize(cookie.name, cookie.value, {\n        maxAge: cookie.maxAge,\n        expires: new Date(Date.now() + cookie.maxAge * 1000),\n        httpOnly: true,\n        secure,\n        path: (_a = cookie.path) !== null && _a !== void 0 ? _a : '/',\n        domain: (_b = cookie.domain) !== null && _b !== void 0 ? _b : '',\n        sameSite: (_c = cookie.sameSite) !== null && _c !== void 0 ? _c : 'lax',\n    });\n}\n/**\n * Get Cookie Header strings.\n */\nexport function getCookieString(req, res, cookies) {\n    const strCookies = cookies.map((c) => serializeCookie(c, isSecureEnvironment(req)));\n    const previousCookies = res.getHeader('Set-Cookie');\n    if (previousCookies) {\n        if (previousCookies instanceof Array) {\n            Array.prototype.push.apply(strCookies, previousCookies);\n        }\n        else if (typeof previousCookies === 'string') {\n            strCookies.push(previousCookies);\n        }\n    }\n    return strCookies;\n}\n/**\n * Set one or more cookies.\n */\nexport function setCookies(req, res, cookies) {\n    res.setHeader('Set-Cookie', getCookieString(req, res, cookies));\n}\n/**\n * Set one or more cookies.\n */\nexport function setCookie(req, res, cookie) {\n    setCookies(req, res, [cookie]);\n}\nexport function deleteCookie(req, res, name) {\n    setCookie(req, res, {\n        name,\n        value: '',\n        maxAge: -1,\n    });\n}\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { NETWORK_FAILURE } from './constants';\nconst _getErrorMessage = (err) => err.msg || err.message || err.error_description || err.error || JSON.stringify(err);\nconst handleError = (error, reject) => {\n    if (!(error === null || error === void 0 ? void 0 : error.status)) {\n        return reject({ message: NETWORK_FAILURE.ERROR_MESSAGE });\n    }\n    if (typeof error.json !== 'function') {\n        return reject(error);\n    }\n    error.json().then((err) => {\n        return reject({\n            message: _getErrorMessage(err),\n            status: (error === null || error === void 0 ? void 0 : error.status) || 500,\n        });\n    });\n};\nconst _getRequestParams = (method, options, body) => {\n    const params = { method, headers: (options === null || options === void 0 ? void 0 : options.headers) || {} };\n    if (method === 'GET') {\n        return params;\n    }\n    params.headers = Object.assign({ 'Content-Type': 'text/plain;charset=UTF-8' }, options === null || options === void 0 ? void 0 : options.headers);\n    params.body = JSON.stringify(body);\n    return params;\n};\nfunction _handleRequest(fetcher, method, url, options, body) {\n    return __awaiter(this, void 0, void 0, function* () {\n        return new Promise((resolve, reject) => {\n            fetcher(url, _getRequestParams(method, options, body))\n                .then((result) => {\n                if (!result.ok)\n                    throw result;\n                if (options === null || options === void 0 ? void 0 : options.noResolveJson)\n                    return resolve;\n                return result.json();\n            })\n                .then((data) => resolve(data))\n                .catch((error) => handleError(error, reject));\n        });\n    });\n}\nexport function get(fetcher, url, options) {\n    return __awaiter(this, void 0, void 0, function* () {\n        return _handleRequest(fetcher, 'GET', url, options);\n    });\n}\nexport function post(fetcher, url, body, options) {\n    return __awaiter(this, void 0, void 0, function* () {\n        return _handleRequest(fetcher, 'POST', url, options, body);\n    });\n}\nexport function put(fetcher, url, body, options) {\n    return __awaiter(this, void 0, void 0, function* () {\n        return _handleRequest(fetcher, 'PUT', url, options, body);\n    });\n}\nexport function remove(fetcher, url, body, options) {\n    return __awaiter(this, void 0, void 0, function* () {\n        return _handleRequest(fetcher, 'DELETE', url, options, body);\n    });\n}\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nexport function expiresAt(expiresIn) {\n    const timeNow = Math.round(Date.now() / 1000);\n    return timeNow + expiresIn;\n}\nexport function uuid() {\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n        const r = (Math.random() * 16) | 0, v = c == 'x' ? r : (r & 0x3) | 0x8;\n        return v.toString(16);\n    });\n}\nexport const isBrowser = () => typeof window !== 'undefined';\nexport function getParameterByName(name, url) {\n    var _a;\n    if (!url)\n        url = ((_a = window === null || window === void 0 ? void 0 : window.location) === null || _a === void 0 ? void 0 : _a.href) || '';\n    // eslint-disable-next-line no-useless-escape\n    name = name.replace(/[\\[\\]]/g, '\\\\$&');\n    const regex = new RegExp('[?&#]' + name + '(=([^&#]*)|&|#|$)'), results = regex.exec(url);\n    if (!results)\n        return null;\n    if (!results[2])\n        return '';\n    return decodeURIComponent(results[2].replace(/\\+/g, ' '));\n}\nexport const resolveFetch = (customFetch) => {\n    let _fetch;\n    if (customFetch) {\n        _fetch = customFetch;\n    }\n    else if (typeof fetch === 'undefined') {\n        _fetch = (...args) => __awaiter(void 0, void 0, void 0, function* () { return yield (yield import('cross-fetch')).fetch(...args); });\n    }\n    else {\n        _fetch = fetch;\n    }\n    return (...args) => _fetch(...args);\n};\n// LocalStorage helpers\nexport const setItemAsync = (storage, key, data) => __awaiter(void 0, void 0, void 0, function* () {\n    isBrowser() && (yield (storage === null || storage === void 0 ? void 0 : storage.setItem(key, JSON.stringify(data))));\n});\nexport const getItemAsync = (storage, key) => __awaiter(void 0, void 0, void 0, function* () {\n    const value = isBrowser() && (yield (storage === null || storage === void 0 ? void 0 : storage.getItem(key)));\n    if (!value)\n        return null;\n    try {\n        return JSON.parse(value);\n    }\n    catch (_a) {\n        return value;\n    }\n});\nexport const getItemSynchronously = (storage, key) => {\n    const value = isBrowser() && (storage === null || storage === void 0 ? void 0 : storage.getItem(key));\n    if (!value || typeof value !== 'string') {\n        return null;\n    }\n    try {\n        return JSON.parse(value);\n    }\n    catch (_a) {\n        return value;\n    }\n};\nexport const removeItemAsync = (storage, key) => __awaiter(void 0, void 0, void 0, function* () {\n    isBrowser() && (yield (storage === null || storage === void 0 ? void 0 : storage.removeItem(key)));\n});\n","/**\n * https://mathiasbynens.be/notes/globalthis\n */\nexport function polyfillGlobalThis() {\n    if (typeof globalThis === 'object')\n        return;\n    try {\n        Object.defineProperty(Object.prototype, '__magic__', {\n            get: function () {\n                return this;\n            },\n            configurable: true,\n        });\n        // @ts-expect-error 'Allow access to magic'\n        __magic__.globalThis = __magic__;\n        // @ts-expect-error 'Allow access to magic'\n        delete Object.prototype.__magic__;\n    }\n    catch (e) {\n        if (typeof self !== 'undefined') {\n            // @ts-expect-error 'Allow access to globals'\n            self.globalThis = self;\n        }\n    }\n}\n","export {};\n","// generated by genversion\nexport const version = '1.22.19';\n","import PostgrestQueryBuilder from './lib/PostgrestQueryBuilder';\nimport PostgrestRpcBuilder from './lib/PostgrestRpcBuilder';\nimport { DEFAULT_HEADERS } from './lib/constants';\nexport default class PostgrestClient {\n    /**\n     * Creates a PostgREST client.\n     *\n     * @param url  URL of the PostgREST endpoint.\n     * @param headers  Custom headers.\n     * @param schema  Postgres schema to switch to.\n     */\n    constructor(url, { headers = {}, schema, fetch, throwOnError, } = {}) {\n        this.url = url;\n        this.headers = Object.assign(Object.assign({}, DEFAULT_HEADERS), headers);\n        this.schema = schema;\n        this.fetch = fetch;\n        this.shouldThrowOnError = throwOnError;\n    }\n    /**\n     * Authenticates the request with JWT.\n     *\n     * @param token  The JWT token to use.\n     */\n    auth(token) {\n        this.headers['Authorization'] = `Bearer ${token}`;\n        return this;\n    }\n    /**\n     * Perform a table operation.\n     *\n     * @param table  The table name to operate on.\n     */\n    from(table) {\n        const url = `${this.url}/${table}`;\n        return new PostgrestQueryBuilder(url, {\n            headers: this.headers,\n            schema: this.schema,\n            fetch: this.fetch,\n            shouldThrowOnError: this.shouldThrowOnError,\n        });\n    }\n    /**\n     * Perform a function call.\n     *\n     * @param fn  The function name to call.\n     * @param params  The parameters to pass to the function call.\n     * @param head  When set to true, no data will be returned.\n     * @param count  Count algorithm to use to count rows in a table.\n     */\n    rpc(fn, params, { head = false, count = null, } = {}) {\n        const url = `${this.url}/rpc/${fn}`;\n        return new PostgrestRpcBuilder(url, {\n            headers: this.headers,\n            schema: this.schema,\n            fetch: this.fetch,\n            shouldThrowOnError: this.shouldThrowOnError,\n        }).rpc(params, { head, count });\n    }\n}\n","import PostgrestClient from './PostgrestClient';\nimport PostgrestFilterBuilder from './lib/PostgrestFilterBuilder';\nimport PostgrestQueryBuilder from './lib/PostgrestQueryBuilder';\nimport { PostgrestBuilder, } from './lib/types';\nexport { PostgrestClient, PostgrestBuilder, PostgrestQueryBuilder, PostgrestFilterBuilder, };\n","import PostgrestTransformBuilder from './PostgrestTransformBuilder';\nexport default class PostgrestFilterBuilder extends PostgrestTransformBuilder {\n    constructor() {\n        super(...arguments);\n        /** @deprecated Use `contains()` instead. */\n        this.cs = this.contains;\n        /** @deprecated Use `containedBy()` instead. */\n        this.cd = this.containedBy;\n        /** @deprecated Use `rangeLt()` instead. */\n        this.sl = this.rangeLt;\n        /** @deprecated Use `rangeGt()` instead. */\n        this.sr = this.rangeGt;\n        /** @deprecated Use `rangeGte()` instead. */\n        this.nxl = this.rangeGte;\n        /** @deprecated Use `rangeLte()` instead. */\n        this.nxr = this.rangeLte;\n        /** @deprecated Use `rangeAdjacent()` instead. */\n        this.adj = this.rangeAdjacent;\n        /** @deprecated Use `overlaps()` instead. */\n        this.ov = this.overlaps;\n    }\n    /**\n     * Finds all rows which doesn't satisfy the filter.\n     *\n     * @param column  The column to filter on.\n     * @param operator  The operator to filter with.\n     * @param value  The value to filter with.\n     */\n    not(column, operator, value) {\n        this.url.searchParams.append(`${column}`, `not.${operator}.${value}`);\n        return this;\n    }\n    /**\n     * Finds all rows satisfying at least one of the filters.\n     *\n     * @param filters  The filters to use, separated by commas.\n     * @param foreignTable  The foreign table to use (if `column` is a foreign column).\n     */\n    or(filters, { foreignTable } = {}) {\n        const key = typeof foreignTable === 'undefined' ? 'or' : `${foreignTable}.or`;\n        this.url.searchParams.append(key, `(${filters})`);\n        return this;\n    }\n    /**\n     * Finds all rows whose value on the stated `column` exactly matches the\n     * specified `value`.\n     *\n     * @param column  The column to filter on.\n     * @param value  The value to filter with.\n     */\n    eq(column, value) {\n        this.url.searchParams.append(`${column}`, `eq.${value}`);\n        return this;\n    }\n    /**\n     * Finds all rows whose value on the stated `column` doesn't match the\n     * specified `value`.\n     *\n     * @param column  The column to filter on.\n     * @param value  The value to filter with.\n     */\n    neq(column, value) {\n        this.url.searchParams.append(`${column}`, `neq.${value}`);\n        return this;\n    }\n    /**\n     * Finds all rows whose value on the stated `column` is greater than the\n     * specified `value`.\n     *\n     * @param column  The column to filter on.\n     * @param value  The value to filter with.\n     */\n    gt(column, value) {\n        this.url.searchParams.append(`${column}`, `gt.${value}`);\n        return this;\n    }\n    /**\n     * Finds all rows whose value on the stated `column` is greater than or\n     * equal to the specified `value`.\n     *\n     * @param column  The column to filter on.\n     * @param value  The value to filter with.\n     */\n    gte(column, value) {\n        this.url.searchParams.append(`${column}`, `gte.${value}`);\n        return this;\n    }\n    /**\n     * Finds all rows whose value on the stated `column` is less than the\n     * specified `value`.\n     *\n     * @param column  The column to filter on.\n     * @param value  The value to filter with.\n     */\n    lt(column, value) {\n        this.url.searchParams.append(`${column}`, `lt.${value}`);\n        return this;\n    }\n    /**\n     * Finds all rows whose value on the stated `column` is less than or equal\n     * to the specified `value`.\n     *\n     * @param column  The column to filter on.\n     * @param value  The value to filter with.\n     */\n    lte(column, value) {\n        this.url.searchParams.append(`${column}`, `lte.${value}`);\n        return this;\n    }\n    /**\n     * Finds all rows whose value in the stated `column` matches the supplied\n     * `pattern` (case sensitive).\n     *\n     * @param column  The column to filter on.\n     * @param pattern  The pattern to filter with.\n     */\n    like(column, pattern) {\n        this.url.searchParams.append(`${column}`, `like.${pattern}`);\n        return this;\n    }\n    /**\n     * Finds all rows whose value in the stated `column` matches the supplied\n     * `pattern` (case insensitive).\n     *\n     * @param column  The column to filter on.\n     * @param pattern  The pattern to filter with.\n     */\n    ilike(column, pattern) {\n        this.url.searchParams.append(`${column}`, `ilike.${pattern}`);\n        return this;\n    }\n    /**\n     * A check for exact equality (null, true, false), finds all rows whose\n     * value on the stated `column` exactly match the specified `value`.\n     *\n     * @param column  The column to filter on.\n     * @param value  The value to filter with.\n     */\n    is(column, value) {\n        this.url.searchParams.append(`${column}`, `is.${value}`);\n        return this;\n    }\n    /**\n     * Finds all rows whose value on the stated `column` is found on the\n     * specified `values`.\n     *\n     * @param column  The column to filter on.\n     * @param values  The values to filter with.\n     */\n    in(column, values) {\n        const cleanedValues = values\n            .map((s) => {\n            // handle postgrest reserved characters\n            // https://postgrest.org/en/v7.0.0/api.html#reserved-characters\n            if (typeof s === 'string' && new RegExp('[,()]').test(s))\n                return `\"${s}\"`;\n            else\n                return `${s}`;\n        })\n            .join(',');\n        this.url.searchParams.append(`${column}`, `in.(${cleanedValues})`);\n        return this;\n    }\n    /**\n     * Finds all rows whose json, array, or range value on the stated `column`\n     * contains the values specified in `value`.\n     *\n     * @param column  The column to filter on.\n     * @param value  The value to filter with.\n     */\n    contains(column, value) {\n        if (typeof value === 'string') {\n            // range types can be inclusive '[', ']' or exclusive '(', ')' so just\n            // keep it simple and accept a string\n            this.url.searchParams.append(`${column}`, `cs.${value}`);\n        }\n        else if (Array.isArray(value)) {\n            // array\n            this.url.searchParams.append(`${column}`, `cs.{${value.join(',')}}`);\n        }\n        else {\n            // json\n            this.url.searchParams.append(`${column}`, `cs.${JSON.stringify(value)}`);\n        }\n        return this;\n    }\n    /**\n     * Finds all rows whose json, array, or range value on the stated `column` is\n     * contained by the specified `value`.\n     *\n     * @param column  The column to filter on.\n     * @param value  The value to filter with.\n     */\n    containedBy(column, value) {\n        if (typeof value === 'string') {\n            // range\n            this.url.searchParams.append(`${column}`, `cd.${value}`);\n        }\n        else if (Array.isArray(value)) {\n            // array\n            this.url.searchParams.append(`${column}`, `cd.{${value.join(',')}}`);\n        }\n        else {\n            // json\n            this.url.searchParams.append(`${column}`, `cd.${JSON.stringify(value)}`);\n        }\n        return this;\n    }\n    /**\n     * Finds all rows whose range value on the stated `column` is strictly to the\n     * left of the specified `range`.\n     *\n     * @param column  The column to filter on.\n     * @param range  The range to filter with.\n     */\n    rangeLt(column, range) {\n        this.url.searchParams.append(`${column}`, `sl.${range}`);\n        return this;\n    }\n    /**\n     * Finds all rows whose range value on the stated `column` is strictly to\n     * the right of the specified `range`.\n     *\n     * @param column  The column to filter on.\n     * @param range  The range to filter with.\n     */\n    rangeGt(column, range) {\n        this.url.searchParams.append(`${column}`, `sr.${range}`);\n        return this;\n    }\n    /**\n     * Finds all rows whose range value on the stated `column` does not extend\n     * to the left of the specified `range`.\n     *\n     * @param column  The column to filter on.\n     * @param range  The range to filter with.\n     */\n    rangeGte(column, range) {\n        this.url.searchParams.append(`${column}`, `nxl.${range}`);\n        return this;\n    }\n    /**\n     * Finds all rows whose range value on the stated `column` does not extend\n     * to the right of the specified `range`.\n     *\n     * @param column  The column to filter on.\n     * @param range  The range to filter with.\n     */\n    rangeLte(column, range) {\n        this.url.searchParams.append(`${column}`, `nxr.${range}`);\n        return this;\n    }\n    /**\n     * Finds all rows whose range value on the stated `column` is adjacent to\n     * the specified `range`.\n     *\n     * @param column  The column to filter on.\n     * @param range  The range to filter with.\n     */\n    rangeAdjacent(column, range) {\n        this.url.searchParams.append(`${column}`, `adj.${range}`);\n        return this;\n    }\n    /**\n     * Finds all rows whose array or range value on the stated `column` overlaps\n     * (has a value in common) with the specified `value`.\n     *\n     * @param column  The column to filter on.\n     * @param value  The value to filter with.\n     */\n    overlaps(column, value) {\n        if (typeof value === 'string') {\n            // range\n            this.url.searchParams.append(`${column}`, `ov.${value}`);\n        }\n        else {\n            // array\n            this.url.searchParams.append(`${column}`, `ov.{${value.join(',')}}`);\n        }\n        return this;\n    }\n    /**\n     * Finds all rows whose text or tsvector value on the stated `column` matches\n     * the tsquery in `query`.\n     *\n     * @param column  The column to filter on.\n     * @param query  The Postgres tsquery string to filter with.\n     * @param config  The text search configuration to use.\n     * @param type  The type of tsquery conversion to use on `query`.\n     */\n    textSearch(column, query, { config, type = null, } = {}) {\n        let typePart = '';\n        if (type === 'plain') {\n            typePart = 'pl';\n        }\n        else if (type === 'phrase') {\n            typePart = 'ph';\n        }\n        else if (type === 'websearch') {\n            typePart = 'w';\n        }\n        const configPart = config === undefined ? '' : `(${config})`;\n        this.url.searchParams.append(`${column}`, `${typePart}fts${configPart}.${query}`);\n        return this;\n    }\n    /**\n     * Finds all rows whose tsvector value on the stated `column` matches\n     * to_tsquery(`query`).\n     *\n     * @param column  The column to filter on.\n     * @param query  The Postgres tsquery string to filter with.\n     * @param config  The text search configuration to use.\n     *\n     * @deprecated Use `textSearch()` instead.\n     */\n    fts(column, query, { config } = {}) {\n        const configPart = typeof config === 'undefined' ? '' : `(${config})`;\n        this.url.searchParams.append(`${column}`, `fts${configPart}.${query}`);\n        return this;\n    }\n    /**\n     * Finds all rows whose tsvector value on the stated `column` matches\n     * plainto_tsquery(`query`).\n     *\n     * @param column  The column to filter on.\n     * @param query  The Postgres tsquery string to filter with.\n     * @param config  The text search configuration to use.\n     *\n     * @deprecated Use `textSearch()` with `type: 'plain'` instead.\n     */\n    plfts(column, query, { config } = {}) {\n        const configPart = typeof config === 'undefined' ? '' : `(${config})`;\n        this.url.searchParams.append(`${column}`, `plfts${configPart}.${query}`);\n        return this;\n    }\n    /**\n     * Finds all rows whose tsvector value on the stated `column` matches\n     * phraseto_tsquery(`query`).\n     *\n     * @param column  The column to filter on.\n     * @param query  The Postgres tsquery string to filter with.\n     * @param config  The text search configuration to use.\n     *\n     * @deprecated Use `textSearch()` with `type: 'phrase'` instead.\n     */\n    phfts(column, query, { config } = {}) {\n        const configPart = typeof config === 'undefined' ? '' : `(${config})`;\n        this.url.searchParams.append(`${column}`, `phfts${configPart}.${query}`);\n        return this;\n    }\n    /**\n     * Finds all rows whose tsvector value on the stated `column` matches\n     * websearch_to_tsquery(`query`).\n     *\n     * @param column  The column to filter on.\n     * @param query  The Postgres tsquery string to filter with.\n     * @param config  The text search configuration to use.\n     *\n     * @deprecated Use `textSearch()` with `type: 'websearch'` instead.\n     */\n    wfts(column, query, { config } = {}) {\n        const configPart = typeof config === 'undefined' ? '' : `(${config})`;\n        this.url.searchParams.append(`${column}`, `wfts${configPart}.${query}`);\n        return this;\n    }\n    /**\n     * Finds all rows whose `column` satisfies the filter.\n     *\n     * @param column  The column to filter on.\n     * @param operator  The operator to filter with.\n     * @param value  The value to filter with.\n     */\n    filter(column, operator, value) {\n        this.url.searchParams.append(`${column}`, `${operator}.${value}`);\n        return this;\n    }\n    /**\n     * Finds all rows whose columns match the specified `query` object.\n     *\n     * @param query  The object to filter with, with column names as keys mapped\n     *               to their filter values.\n     */\n    match(query) {\n        Object.keys(query).forEach((key) => {\n            this.url.searchParams.append(`${key}`, `eq.${query[key]}`);\n        });\n        return this;\n    }\n}\n","import { PostgrestBuilder } from './types';\nimport PostgrestFilterBuilder from './PostgrestFilterBuilder';\nexport default class PostgrestQueryBuilder extends PostgrestBuilder {\n    constructor(url, { headers = {}, schema, fetch, shouldThrowOnError, } = {}) {\n        super({ fetch, shouldThrowOnError });\n        this.url = new URL(url);\n        this.headers = Object.assign({}, headers);\n        this.schema = schema;\n    }\n    /**\n     * Performs vertical filtering with SELECT.\n     *\n     * @param columns  The columns to retrieve, separated by commas.\n     * @param head  When set to true, select will void data.\n     * @param count  Count algorithm to use to count rows in a table.\n     */\n    select(columns = '*', { head = false, count = null, } = {}) {\n        this.method = 'GET';\n        // Remove whitespaces except when quoted\n        let quoted = false;\n        const cleanedColumns = columns\n            .split('')\n            .map((c) => {\n            if (/\\s/.test(c) && !quoted) {\n                return '';\n            }\n            if (c === '\"') {\n                quoted = !quoted;\n            }\n            return c;\n        })\n            .join('');\n        this.url.searchParams.set('select', cleanedColumns);\n        if (count) {\n            this.headers['Prefer'] = `count=${count}`;\n        }\n        if (head) {\n            this.method = 'HEAD';\n        }\n        return new PostgrestFilterBuilder(this);\n    }\n    insert(values, { upsert = false, onConflict, returning = 'representation', count = null, } = {}) {\n        this.method = 'POST';\n        const prefersHeaders = [`return=${returning}`];\n        if (upsert)\n            prefersHeaders.push('resolution=merge-duplicates');\n        if (upsert && onConflict !== undefined)\n            this.url.searchParams.set('on_conflict', onConflict);\n        this.body = values;\n        if (count) {\n            prefersHeaders.push(`count=${count}`);\n        }\n        if (this.headers['Prefer']) {\n            prefersHeaders.unshift(this.headers['Prefer']);\n        }\n        this.headers['Prefer'] = prefersHeaders.join(',');\n        if (Array.isArray(values)) {\n            const columns = values.reduce((acc, x) => acc.concat(Object.keys(x)), []);\n            if (columns.length > 0) {\n                const uniqueColumns = [...new Set(columns)].map((column) => `\"${column}\"`);\n                this.url.searchParams.set('columns', uniqueColumns.join(','));\n            }\n        }\n        return new PostgrestFilterBuilder(this);\n    }\n    /**\n     * Performs an UPSERT into the table.\n     *\n     * @param values  The values to insert.\n     * @param onConflict  By specifying the `on_conflict` query parameter, you can make UPSERT work on a column(s) that has a UNIQUE constraint.\n     * @param returning  By default the new record is returned. Set this to 'minimal' if you don't need this value.\n     * @param count  Count algorithm to use to count rows in a table.\n     * @param ignoreDuplicates  Specifies if duplicate rows should be ignored and not inserted.\n     */\n    upsert(values, { onConflict, returning = 'representation', count = null, ignoreDuplicates = false, } = {}) {\n        this.method = 'POST';\n        const prefersHeaders = [\n            `resolution=${ignoreDuplicates ? 'ignore' : 'merge'}-duplicates`,\n            `return=${returning}`,\n        ];\n        if (onConflict !== undefined)\n            this.url.searchParams.set('on_conflict', onConflict);\n        this.body = values;\n        if (count) {\n            prefersHeaders.push(`count=${count}`);\n        }\n        if (this.headers['Prefer']) {\n            prefersHeaders.unshift(this.headers['Prefer']);\n        }\n        this.headers['Prefer'] = prefersHeaders.join(',');\n        return new PostgrestFilterBuilder(this);\n    }\n    /**\n     * Performs an UPDATE on the table.\n     *\n     * @param values  The values to update.\n     * @param returning  By default the updated record is returned. Set this to 'minimal' if you don't need this value.\n     * @param count  Count algorithm to use to count rows in a table.\n     */\n    update(values, { returning = 'representation', count = null, } = {}) {\n        this.method = 'PATCH';\n        const prefersHeaders = [`return=${returning}`];\n        this.body = values;\n        if (count) {\n            prefersHeaders.push(`count=${count}`);\n        }\n        if (this.headers['Prefer']) {\n            prefersHeaders.unshift(this.headers['Prefer']);\n        }\n        this.headers['Prefer'] = prefersHeaders.join(',');\n        return new PostgrestFilterBuilder(this);\n    }\n    /**\n     * Performs a DELETE on the table.\n     *\n     * @param returning  If `true`, return the deleted row(s) in the response.\n     * @param count  Count algorithm to use to count rows in a table.\n     */\n    delete({ returning = 'representation', count = null, } = {}) {\n        this.method = 'DELETE';\n        const prefersHeaders = [`return=${returning}`];\n        if (count) {\n            prefersHeaders.push(`count=${count}`);\n        }\n        if (this.headers['Prefer']) {\n            prefersHeaders.unshift(this.headers['Prefer']);\n        }\n        this.headers['Prefer'] = prefersHeaders.join(',');\n        return new PostgrestFilterBuilder(this);\n    }\n}\n","import { PostgrestBuilder } from './types';\nimport PostgrestFilterBuilder from './PostgrestFilterBuilder';\nexport default class PostgrestRpcBuilder extends PostgrestBuilder {\n    constructor(url, { headers = {}, schema, fetch, shouldThrowOnError, } = {}) {\n        super({ fetch, shouldThrowOnError });\n        this.url = new URL(url);\n        this.headers = Object.assign({}, headers);\n        this.schema = schema;\n    }\n    /**\n     * Perform a function call.\n     */\n    rpc(params, { head = false, count = null, } = {}) {\n        if (head) {\n            this.method = 'HEAD';\n            if (params) {\n                Object.entries(params).forEach(([name, value]) => {\n                    this.url.searchParams.append(name, value);\n                });\n            }\n        }\n        else {\n            this.method = 'POST';\n            this.body = params;\n        }\n        if (count) {\n            if (this.headers['Prefer'] !== undefined)\n                this.headers['Prefer'] += `,count=${count}`;\n            else\n                this.headers['Prefer'] = `count=${count}`;\n        }\n        return new PostgrestFilterBuilder(this);\n    }\n}\n","import { PostgrestBuilder } from './types';\n/**\n * Post-filters (transforms)\n */\nexport default class PostgrestTransformBuilder extends PostgrestBuilder {\n    /**\n     * Performs vertical filtering with SELECT.\n     *\n     * @param columns  The columns to retrieve, separated by commas.\n     */\n    select(columns = '*') {\n        // Remove whitespaces except when quoted\n        let quoted = false;\n        const cleanedColumns = columns\n            .split('')\n            .map((c) => {\n            if (/\\s/.test(c) && !quoted) {\n                return '';\n            }\n            if (c === '\"') {\n                quoted = !quoted;\n            }\n            return c;\n        })\n            .join('');\n        this.url.searchParams.set('select', cleanedColumns);\n        return this;\n    }\n    /**\n     * Orders the result with the specified `column`.\n     *\n     * @param column  The column to order on.\n     * @param ascending  If `true`, the result will be in ascending order.\n     * @param nullsFirst  If `true`, `null`s appear first.\n     * @param foreignTable  The foreign table to use (if `column` is a foreign column).\n     */\n    order(column, { ascending = true, nullsFirst = false, foreignTable, } = {}) {\n        const key = typeof foreignTable === 'undefined' ? 'order' : `${foreignTable}.order`;\n        const existingOrder = this.url.searchParams.get(key);\n        this.url.searchParams.set(key, `${existingOrder ? `${existingOrder},` : ''}${column}.${ascending ? 'asc' : 'desc'}.${nullsFirst ? 'nullsfirst' : 'nullslast'}`);\n        return this;\n    }\n    /**\n     * Limits the result with the specified `count`.\n     *\n     * @param count  The maximum no. of rows to limit to.\n     * @param foreignTable  The foreign table to use (for foreign columns).\n     */\n    limit(count, { foreignTable } = {}) {\n        const key = typeof foreignTable === 'undefined' ? 'limit' : `${foreignTable}.limit`;\n        this.url.searchParams.set(key, `${count}`);\n        return this;\n    }\n    /**\n     * Limits the result to rows within the specified range, inclusive.\n     *\n     * @param from  The starting index from which to limit the result, inclusive.\n     * @param to  The last index to which to limit the result, inclusive.\n     * @param foreignTable  The foreign table to use (for foreign columns).\n     */\n    range(from, to, { foreignTable } = {}) {\n        const keyOffset = typeof foreignTable === 'undefined' ? 'offset' : `${foreignTable}.offset`;\n        const keyLimit = typeof foreignTable === 'undefined' ? 'limit' : `${foreignTable}.limit`;\n        this.url.searchParams.set(keyOffset, `${from}`);\n        // Range is inclusive, so add 1\n        this.url.searchParams.set(keyLimit, `${to - from + 1}`);\n        return this;\n    }\n    /**\n     * Sets the AbortSignal for the fetch request.\n     */\n    abortSignal(signal) {\n        this.signal = signal;\n        return this;\n    }\n    /**\n     * Retrieves only one row from the result. Result must be one row (e.g. using\n     * `limit`), otherwise this will result in an error.\n     */\n    single() {\n        this.headers['Accept'] = 'application/vnd.pgrst.object+json';\n        return this;\n    }\n    /**\n     * Retrieves at most one row from the result. Result must be at most one row\n     * (e.g. using `eq` on a UNIQUE column), otherwise this will result in an\n     * error.\n     */\n    maybeSingle() {\n        this.headers['Accept'] = 'application/vnd.pgrst.object+json';\n        this.allowEmpty = true;\n        return this;\n    }\n    /**\n     * Set the response type to CSV.\n     */\n    csv() {\n        this.headers['Accept'] = 'text/csv';\n        return this;\n    }\n}\n","import { version } from './version';\nexport const DEFAULT_HEADERS = { 'X-Client-Info': `postgrest-js/${version}` };\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nexport class PostgrestBuilder {\n    constructor(builder) {\n        Object.assign(this, builder);\n        let _fetch;\n        if (builder.fetch) {\n            _fetch = builder.fetch;\n        }\n        else if (typeof fetch === 'undefined') {\n            _fetch = (...args) => __awaiter(this, void 0, void 0, function* () { return yield (yield import('cross-fetch')).fetch(...args); });\n        }\n        else {\n            _fetch = fetch;\n        }\n        this.fetch = (...args) => _fetch(...args);\n        this.shouldThrowOnError = builder.shouldThrowOnError || false;\n        this.allowEmpty = builder.allowEmpty || false;\n    }\n    /**\n     * If there's an error with the query, throwOnError will reject the promise by\n     * throwing the error instead of returning it as part of a successful response.\n     *\n     * {@link https://github.com/supabase/supabase-js/issues/92}\n     */\n    throwOnError(throwOnError) {\n        if (throwOnError === null || throwOnError === undefined) {\n            throwOnError = true;\n        }\n        this.shouldThrowOnError = throwOnError;\n        return this;\n    }\n    then(onfulfilled, onrejected) {\n        // https://postgrest.org/en/stable/api.html#switching-schemas\n        if (typeof this.schema === 'undefined') {\n            // skip\n        }\n        else if (['GET', 'HEAD'].includes(this.method)) {\n            this.headers['Accept-Profile'] = this.schema;\n        }\n        else {\n            this.headers['Content-Profile'] = this.schema;\n        }\n        if (this.method !== 'GET' && this.method !== 'HEAD') {\n            this.headers['Content-Type'] = 'application/json';\n        }\n        let res = this.fetch(this.url.toString(), {\n            method: this.method,\n            headers: this.headers,\n            body: JSON.stringify(this.body),\n            signal: this.signal,\n        }).then((res) => __awaiter(this, void 0, void 0, function* () {\n            var _a, _b, _c, _d;\n            let error = null;\n            let data = null;\n            let count = null;\n            let status = res.status;\n            let statusText = res.statusText;\n            if (res.ok) {\n                const isReturnMinimal = (_a = this.headers['Prefer']) === null || _a === void 0 ? void 0 : _a.split(',').includes('return=minimal');\n                if (this.method !== 'HEAD' && !isReturnMinimal) {\n                    const text = yield res.text();\n                    if (!text) {\n                        // discard `text`\n                    }\n                    else if (this.headers['Accept'] === 'text/csv') {\n                        data = text;\n                    }\n                    else {\n                        data = JSON.parse(text);\n                    }\n                }\n                const countHeader = (_b = this.headers['Prefer']) === null || _b === void 0 ? void 0 : _b.match(/count=(exact|planned|estimated)/);\n                const contentRange = (_c = res.headers.get('content-range')) === null || _c === void 0 ? void 0 : _c.split('/');\n                if (countHeader && contentRange && contentRange.length > 1) {\n                    count = parseInt(contentRange[1]);\n                }\n            }\n            else {\n                const body = yield res.text();\n                try {\n                    error = JSON.parse(body);\n                }\n                catch (_e) {\n                    error = {\n                        message: body,\n                    };\n                }\n                if (error && this.allowEmpty && ((_d = error === null || error === void 0 ? void 0 : error.details) === null || _d === void 0 ? void 0 : _d.includes('Results contain 0 rows'))) {\n                    error = null;\n                    status = 200;\n                    statusText = 'OK';\n                }\n                if (error && this.shouldThrowOnError) {\n                    throw error;\n                }\n            }\n            const postgrestResponse = {\n                error,\n                data,\n                count,\n                status,\n                statusText,\n                body: data,\n            };\n            return postgrestResponse;\n        }));\n        if (!this.shouldThrowOnError) {\n            res = res.catch((fetchError) => ({\n                error: {\n                    message: `FetchError: ${fetchError.message}`,\n                    details: '',\n                    hint: '',\n                    code: fetchError.code || '',\n                },\n                data: null,\n                body: null,\n                count: null,\n                status: 400,\n                statusText: 'Bad Request',\n            }));\n        }\n        return res.then(onfulfilled, onrejected);\n    }\n}\n","// generated by genversion\nexport const version = '0.37.4';\n","import { CHANNEL_EVENTS, CHANNEL_STATES } from './lib/constants';\nimport Push from './lib/push';\nimport Timer from './lib/timer';\nimport RealtimePresence from './RealtimePresence';\nexport default class RealtimeChannel {\n    constructor(topic, params = {}, socket) {\n        this.topic = topic;\n        this.params = params;\n        this.socket = socket;\n        this.bindings = [];\n        this.state = CHANNEL_STATES.closed;\n        this.joinedOnce = false;\n        this.pushBuffer = [];\n        this.timeout = this.socket.timeout;\n        this.joinPush = new Push(this, CHANNEL_EVENTS.join, this.params, this.timeout);\n        this.rejoinTimer = new Timer(() => this.rejoinUntilConnected(), this.socket.reconnectAfterMs);\n        this.joinPush.receive('ok', () => {\n            this.state = CHANNEL_STATES.joined;\n            this.rejoinTimer.reset();\n            this.pushBuffer.forEach((pushEvent) => pushEvent.send());\n            this.pushBuffer = [];\n        });\n        this.onClose(() => {\n            this.rejoinTimer.reset();\n            this.socket.log('channel', `close ${this.topic} ${this.joinRef()}`);\n            this.state = CHANNEL_STATES.closed;\n            this.socket.remove(this);\n        });\n        this.onError((reason) => {\n            if (this.isLeaving() || this.isClosed()) {\n                return;\n            }\n            this.socket.log('channel', `error ${this.topic}`, reason);\n            this.state = CHANNEL_STATES.errored;\n            this.rejoinTimer.scheduleTimeout();\n        });\n        this.joinPush.receive('timeout', () => {\n            if (!this.isJoining()) {\n                return;\n            }\n            this.socket.log('channel', `timeout ${this.topic}`, this.joinPush.timeout);\n            this.state = CHANNEL_STATES.errored;\n            this.rejoinTimer.scheduleTimeout();\n        });\n        this.on(CHANNEL_EVENTS.reply, {}, (payload, ref) => {\n            this.trigger(this.replyEventName(ref), payload);\n        });\n        this.presence = new RealtimePresence(this);\n    }\n    list() {\n        return this.presence.list();\n    }\n    rejoinUntilConnected() {\n        this.rejoinTimer.scheduleTimeout();\n        if (this.socket.isConnected()) {\n            this.rejoin();\n        }\n    }\n    subscribe(timeout = this.timeout) {\n        if (this.joinedOnce) {\n            throw `tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance`;\n        }\n        else {\n            const configs = this.bindings.reduce((acc, binding) => {\n                const { type } = binding;\n                if (![\n                    'phx_close',\n                    'phx_error',\n                    'phx_reply',\n                    'presence_diff',\n                    'presence_state',\n                ].includes(type)) {\n                    acc[type] = binding;\n                }\n                return acc;\n            }, {});\n            if (Object.keys(configs).length) {\n                this.updateJoinPayload({ configs });\n            }\n            this.joinedOnce = true;\n            this.rejoin(timeout);\n            return this.joinPush;\n        }\n    }\n    /**\n     * Registers a callback that will be executed when the channel closes.\n     */\n    onClose(callback) {\n        this.on(CHANNEL_EVENTS.close, {}, callback);\n    }\n    /**\n     * Registers a callback that will be executed when the channel encounteres an error.\n     */\n    onError(callback) {\n        this.on(CHANNEL_EVENTS.error, {}, (reason) => callback(reason));\n    }\n    on(type, filter, callback) {\n        this.bindings.push({\n            type,\n            filter: filter !== null && filter !== void 0 ? filter : {},\n            callback: callback !== null && callback !== void 0 ? callback : (() => { }),\n        });\n    }\n    off(type, filter) {\n        this.bindings = this.bindings.filter((bind) => {\n            return !(bind.type === type && RealtimeChannel.isEqual(bind.filter, filter));\n        });\n    }\n    /**\n     * Returns `true` if the socket is connected and the channel has been joined.\n     */\n    canPush() {\n        return this.socket.isConnected() && this.isJoined();\n    }\n    push(event, payload, timeout = this.timeout) {\n        if (!this.joinedOnce) {\n            throw `tried to push '${event}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;\n        }\n        let pushEvent = new Push(this, event, payload, timeout);\n        if (this.canPush()) {\n            pushEvent.send();\n        }\n        else {\n            pushEvent.startTimeout();\n            this.pushBuffer.push(pushEvent);\n        }\n        return pushEvent;\n    }\n    updateJoinPayload(payload) {\n        this.joinPush.updatePayload(payload);\n    }\n    /**\n     * Leaves the channel.\n     *\n     * Unsubscribes from server events, and instructs channel to terminate on server.\n     * Triggers onClose() hooks.\n     *\n     * To receive leave acknowledgements, use the a `receive` hook to bind to the server ack, ie:\n     * channel.unsubscribe().receive(\"ok\", () => alert(\"left!\") )\n     */\n    unsubscribe(timeout = this.timeout) {\n        this.state = CHANNEL_STATES.leaving;\n        const onClose = () => {\n            this.socket.log('channel', `leave ${this.topic}`);\n            this.trigger(CHANNEL_EVENTS.close, 'leave', this.joinRef());\n        };\n        // Destroy joinPush to avoid connection timeouts during unscription phase\n        this.joinPush.destroy();\n        const leavePush = new Push(this, CHANNEL_EVENTS.leave, {}, timeout);\n        leavePush.receive('ok', () => onClose()).receive('timeout', () => onClose());\n        leavePush.send();\n        if (!this.canPush()) {\n            leavePush.trigger('ok', {});\n        }\n        return leavePush;\n    }\n    /**\n     * Overridable message hook\n     *\n     * Receives all events for specialized message handling before dispatching to the channel callbacks.\n     * Must return the payload, modified or unmodified.\n     */\n    onMessage(event, payload, ref) {\n        return payload;\n    }\n    isMember(topic) {\n        return this.topic === topic;\n    }\n    joinRef() {\n        return this.joinPush.ref;\n    }\n    rejoin(timeout = this.timeout) {\n        if (this.isLeaving()) {\n            return;\n        }\n        this.socket.leaveOpenTopic(this.topic);\n        this.state = CHANNEL_STATES.joining;\n        this.joinPush.resend(timeout);\n    }\n    trigger(type, payload, ref) {\n        const { close, error, leave, join } = CHANNEL_EVENTS;\n        const events = [close, error, leave, join];\n        if (ref && events.indexOf(type) >= 0 && ref !== this.joinRef()) {\n            return;\n        }\n        const handledPayload = this.onMessage(type, payload, ref);\n        if (payload && !handledPayload) {\n            throw 'channel onMessage callbacks must return the payload, modified or unmodified';\n        }\n        this.bindings\n            .filter((bind) => {\n            var _a, _b;\n            return ((bind === null || bind === void 0 ? void 0 : bind.type) === type &&\n                (((_a = bind === null || bind === void 0 ? void 0 : bind.filter) === null || _a === void 0 ? void 0 : _a.event) === '*' ||\n                    ((_b = bind === null || bind === void 0 ? void 0 : bind.filter) === null || _b === void 0 ? void 0 : _b.event) === (payload === null || payload === void 0 ? void 0 : payload.event)));\n        })\n            .map((bind) => bind.callback(handledPayload, ref));\n    }\n    send(payload) {\n        const push = this.push(payload.type, payload);\n        return new Promise((resolve, reject) => {\n            push.receive('ok', () => resolve('ok'));\n            push.receive('timeout', () => reject('timeout'));\n        });\n    }\n    replyEventName(ref) {\n        return `chan_reply_${ref}`;\n    }\n    isClosed() {\n        return this.state === CHANNEL_STATES.closed;\n    }\n    isErrored() {\n        return this.state === CHANNEL_STATES.errored;\n    }\n    isJoined() {\n        return this.state === CHANNEL_STATES.joined;\n    }\n    isJoining() {\n        return this.state === CHANNEL_STATES.joining;\n    }\n    isLeaving() {\n        return this.state === CHANNEL_STATES.leaving;\n    }\n    static isEqual(obj1, obj2) {\n        if (Object.keys(obj1).length !== Object.keys(obj2).length) {\n            return false;\n        }\n        for (const k in obj1) {\n            if (obj1[k] !== obj2[k]) {\n                return false;\n            }\n        }\n        return true;\n    }\n}\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { w3cwebsocket } from 'websocket';\nimport { VSN, CHANNEL_EVENTS, TRANSPORTS, SOCKET_STATES, DEFAULT_TIMEOUT, WS_CLOSE_NORMAL, DEFAULT_HEADERS, CONNECTION_STATE, } from './lib/constants';\nimport Timer from './lib/timer';\nimport Serializer from './lib/serializer';\nimport RealtimeSubscription from './RealtimeSubscription';\nimport RealtimeChannel from './RealtimeChannel';\nconst noop = () => { };\nexport default class RealtimeClient {\n    /**\n     * Initializes the Socket.\n     *\n     * @param endPoint The string WebSocket endpoint, ie, \"ws://example.com/socket\", \"wss://example.com\", \"/socket\" (inherited host & protocol)\n     * @param options.transport The Websocket Transport, for example WebSocket.\n     * @param options.timeout The default timeout in milliseconds to trigger push timeouts.\n     * @param options.params The optional params to pass when connecting.\n     * @param options.headers The optional headers to pass when connecting.\n     * @param options.heartbeatIntervalMs The millisec interval to send a heartbeat message.\n     * @param options.logger The optional function for specialized logging, ie: logger: (kind, msg, data) => { console.log(`${kind}: ${msg}`, data) }\n     * @param options.encode The function to encode outgoing messages. Defaults to JSON: (payload, callback) => callback(JSON.stringify(payload))\n     * @param options.decode The function to decode incoming messages. Defaults to Serializer's decode.\n     * @param options.longpollerTimeout The maximum timeout of a long poll AJAX request. Defaults to 20s (double the server long poll timer).\n     * @param options.reconnectAfterMs he optional function that returns the millsec reconnect interval. Defaults to stepped backoff off.\n     */\n    constructor(endPoint, options) {\n        this.accessToken = null;\n        this.channels = [];\n        this.endPoint = '';\n        this.headers = DEFAULT_HEADERS;\n        this.params = {};\n        this.timeout = DEFAULT_TIMEOUT;\n        this.transport = w3cwebsocket;\n        this.heartbeatIntervalMs = 30000;\n        this.longpollerTimeout = 20000;\n        this.heartbeatTimer = undefined;\n        this.pendingHeartbeatRef = null;\n        this.ref = 0;\n        this.logger = noop;\n        this.conn = null;\n        this.sendBuffer = [];\n        this.serializer = new Serializer();\n        this.stateChangeCallbacks = {\n            open: [],\n            close: [],\n            error: [],\n            message: [],\n        };\n        this.endPoint = `${endPoint}/${TRANSPORTS.websocket}`;\n        if (options === null || options === void 0 ? void 0 : options.params)\n            this.params = options.params;\n        if (options === null || options === void 0 ? void 0 : options.headers)\n            this.headers = Object.assign(Object.assign({}, this.headers), options.headers);\n        if (options === null || options === void 0 ? void 0 : options.timeout)\n            this.timeout = options.timeout;\n        if (options === null || options === void 0 ? void 0 : options.logger)\n            this.logger = options.logger;\n        if (options === null || options === void 0 ? void 0 : options.transport)\n            this.transport = options.transport;\n        if (options === null || options === void 0 ? void 0 : options.heartbeatIntervalMs)\n            this.heartbeatIntervalMs = options.heartbeatIntervalMs;\n        if (options === null || options === void 0 ? void 0 : options.longpollerTimeout)\n            this.longpollerTimeout = options.longpollerTimeout;\n        this.reconnectAfterMs = (options === null || options === void 0 ? void 0 : options.reconnectAfterMs) ? options.reconnectAfterMs\n            : (tries) => {\n                return [1000, 2000, 5000, 10000][tries - 1] || 10000;\n            };\n        this.encode = (options === null || options === void 0 ? void 0 : options.encode) ? options.encode\n            : (payload, callback) => {\n                return callback(JSON.stringify(payload));\n            };\n        this.decode = (options === null || options === void 0 ? void 0 : options.decode) ? options.decode\n            : this.serializer.decode.bind(this.serializer);\n        this.reconnectTimer = new Timer(() => __awaiter(this, void 0, void 0, function* () {\n            yield this.disconnect();\n            this.connect();\n        }), this.reconnectAfterMs);\n    }\n    /**\n     * Connects the socket, unless already connected.\n     */\n    connect() {\n        if (this.conn) {\n            return;\n        }\n        this.conn = new this.transport(this.endPointURL(), [], null, this.headers);\n        if (this.conn) {\n            // this.conn.timeout = this.longpollerTimeout // TYPE ERROR\n            this.conn.binaryType = 'arraybuffer';\n            this.conn.onopen = () => this._onConnOpen();\n            this.conn.onerror = (error) => this._onConnError(error);\n            this.conn.onmessage = (event) => this.onConnMessage(event);\n            this.conn.onclose = (event) => this._onConnClose(event);\n        }\n    }\n    /**\n     * Disconnects the socket.\n     *\n     * @param code A numeric status code to send on disconnect.\n     * @param reason A custom reason for the disconnect.\n     */\n    disconnect(code, reason) {\n        return new Promise((resolve, _reject) => {\n            try {\n                if (this.conn) {\n                    this.conn.onclose = function () { }; // noop\n                    if (code) {\n                        this.conn.close(code, reason || '');\n                    }\n                    else {\n                        this.conn.close();\n                    }\n                    this.conn = null;\n                    // remove open handles\n                    this.heartbeatTimer && clearInterval(this.heartbeatTimer);\n                    this.reconnectTimer.reset();\n                }\n                resolve({ error: null, data: true });\n            }\n            catch (error) {\n                resolve({ error: error, data: false });\n            }\n        });\n    }\n    /**\n     * Logs the message.\n     *\n     * For customized logging, `this.logger` can be overriden.\n     */\n    log(kind, msg, data) {\n        this.logger(kind, msg, data);\n    }\n    /**\n     * Registers a callback for connection state change event.\n     *\n     * @param callback A function to be called when the event occurs.\n     *\n     * @example\n     *    socket.onOpen(() => console.log(\"Socket opened.\"))\n     */\n    onOpen(callback) {\n        this.stateChangeCallbacks.open.push(callback);\n    }\n    /**\n     * Registers a callback for connection state change events.\n     *\n     * @param callback A function to be called when the event occurs.\n     *\n     * @example\n     *    socket.onOpen(() => console.log(\"Socket closed.\"))\n     */\n    onClose(callback) {\n        this.stateChangeCallbacks.close.push(callback);\n    }\n    /**\n     * Registers a callback for connection state change events.\n     *\n     * @param callback A function to be called when the event occurs.\n     *\n     * @example\n     *    socket.onOpen((error) => console.log(\"An error occurred\"))\n     */\n    onError(callback) {\n        this.stateChangeCallbacks.error.push(callback);\n    }\n    /**\n     * Calls a function any time a message is received.\n     *\n     * @param callback A function to be called when the event occurs.\n     *\n     * @example\n     *    socket.onMessage((message) => console.log(message))\n     */\n    onMessage(callback) {\n        this.stateChangeCallbacks.message.push(callback);\n    }\n    /**\n     * Returns the current state of the socket.\n     */\n    connectionState() {\n        switch (this.conn && this.conn.readyState) {\n            case SOCKET_STATES.connecting:\n                return CONNECTION_STATE.Connecting;\n            case SOCKET_STATES.open:\n                return CONNECTION_STATE.Open;\n            case SOCKET_STATES.closing:\n                return CONNECTION_STATE.Closing;\n            default:\n                return CONNECTION_STATE.Closed;\n        }\n    }\n    /**\n     * Retuns `true` is the connection is open.\n     */\n    isConnected() {\n        return this.connectionState() === CONNECTION_STATE.Open;\n    }\n    /**\n     * Removes a subscription from the socket.\n     *\n     * @param channel An open subscription.\n     */\n    remove(channel) {\n        this.channels = this.channels.filter((c) => c.joinRef() !== channel.joinRef());\n    }\n    channel(topic, chanParams = {}) {\n        var _a;\n        const { selfBroadcast } = chanParams, params = __rest(chanParams, [\"selfBroadcast\"]);\n        if (selfBroadcast) {\n            params.self_broadcast = selfBroadcast;\n        }\n        const chan = ((_a = this.params) === null || _a === void 0 ? void 0 : _a.vsndate) ? new RealtimeChannel(topic, params, this)\n            : new RealtimeSubscription(topic, params, this);\n        if (chan instanceof RealtimeChannel) {\n            chan.presence.onJoin((key, currentPresences, newPresences) => {\n                chan.trigger('presence', {\n                    event: 'JOIN',\n                    key,\n                    currentPresences,\n                    newPresences,\n                });\n            });\n            chan.presence.onLeave((key, currentPresences, leftPresences) => {\n                chan.trigger('presence', {\n                    event: 'LEAVE',\n                    key,\n                    currentPresences,\n                    leftPresences,\n                });\n            });\n            chan.presence.onSync(() => {\n                chan.trigger('presence', { event: 'SYNC' });\n            });\n        }\n        this.channels.push(chan);\n        return chan;\n    }\n    /**\n     * Push out a message if the socket is connected.\n     *\n     * If the socket is not connected, the message gets enqueued within a local buffer, and sent out when a connection is next established.\n     */\n    push(data) {\n        const { topic, event, payload, ref } = data;\n        let callback = () => {\n            this.encode(data, (result) => {\n                var _a;\n                (_a = this.conn) === null || _a === void 0 ? void 0 : _a.send(result);\n            });\n        };\n        this.log('push', `${topic} ${event} (${ref})`, payload);\n        if (this.isConnected()) {\n            callback();\n        }\n        else {\n            this.sendBuffer.push(callback);\n        }\n    }\n    onConnMessage(rawMessage) {\n        this.decode(rawMessage.data, (msg) => {\n            let { topic, event, payload, ref } = msg;\n            if ((ref && ref === this.pendingHeartbeatRef) ||\n                event === (payload === null || payload === void 0 ? void 0 : payload.type)) {\n                this.pendingHeartbeatRef = null;\n            }\n            this.log('receive', `${payload.status || ''} ${topic} ${event} ${(ref && '(' + ref + ')') || ''}`, payload);\n            this.channels\n                .filter((channel) => channel.isMember(topic))\n                .forEach((channel) => channel.trigger(event, payload, ref));\n            this.stateChangeCallbacks.message.forEach((callback) => callback(msg));\n        });\n    }\n    /**\n     * Returns the URL of the websocket.\n     */\n    endPointURL() {\n        return this._appendParams(this.endPoint, Object.assign({}, this.params, { vsn: VSN }));\n    }\n    /**\n     * Return the next message ref, accounting for overflows\n     */\n    makeRef() {\n        let newRef = this.ref + 1;\n        if (newRef === this.ref) {\n            this.ref = 0;\n        }\n        else {\n            this.ref = newRef;\n        }\n        return this.ref.toString();\n    }\n    /**\n     * Sets the JWT access token used for channel subscription authorization and Realtime RLS.\n     *\n     * @param token A JWT string.\n     */\n    setAuth(token) {\n        this.accessToken = token;\n        this.channels.forEach((channel) => {\n            token && channel.updateJoinPayload({ user_token: token });\n            if (channel.joinedOnce && channel.isJoined()) {\n                channel.push(CHANNEL_EVENTS.access_token, { access_token: token });\n            }\n        });\n    }\n    /**\n     * Unsubscribe from channels with the specified topic.\n     */\n    leaveOpenTopic(topic) {\n        let dupChannel = this.channels.find((c) => c.topic === topic && (c.isJoined() || c.isJoining()));\n        if (dupChannel) {\n            this.log('transport', `leaving duplicate topic \"${topic}\"`);\n            dupChannel.unsubscribe();\n        }\n    }\n    _onConnOpen() {\n        this.log('transport', `connected to ${this.endPointURL()}`);\n        this._flushSendBuffer();\n        this.reconnectTimer.reset();\n        this.heartbeatTimer && clearInterval(this.heartbeatTimer);\n        this.heartbeatTimer = setInterval(() => this._sendHeartbeat(), this.heartbeatIntervalMs);\n        this.stateChangeCallbacks.open.forEach((callback) => callback());\n    }\n    _onConnClose(event) {\n        this.log('transport', 'close', event);\n        this._triggerChanError();\n        this.heartbeatTimer && clearInterval(this.heartbeatTimer);\n        this.reconnectTimer.scheduleTimeout();\n        this.stateChangeCallbacks.close.forEach((callback) => callback(event));\n    }\n    _onConnError(error) {\n        this.log('transport', error.message);\n        this._triggerChanError();\n        this.stateChangeCallbacks.error.forEach((callback) => callback(error));\n    }\n    _triggerChanError() {\n        this.channels.forEach((channel) => channel.trigger(CHANNEL_EVENTS.error));\n    }\n    _appendParams(url, params) {\n        if (Object.keys(params).length === 0) {\n            return url;\n        }\n        const prefix = url.match(/\\?/) ? '&' : '?';\n        const query = new URLSearchParams(params);\n        return `${url}${prefix}${query}`;\n    }\n    _flushSendBuffer() {\n        if (this.isConnected() && this.sendBuffer.length > 0) {\n            this.sendBuffer.forEach((callback) => callback());\n            this.sendBuffer = [];\n        }\n    }\n    _sendHeartbeat() {\n        var _a;\n        if (!this.isConnected()) {\n            return;\n        }\n        if (this.pendingHeartbeatRef) {\n            this.pendingHeartbeatRef = null;\n            this.log('transport', 'heartbeat timeout. Attempting to re-establish connection');\n            (_a = this.conn) === null || _a === void 0 ? void 0 : _a.close(WS_CLOSE_NORMAL, 'hearbeat timeout');\n            return;\n        }\n        this.pendingHeartbeatRef = this.makeRef();\n        this.push({\n            topic: 'phoenix',\n            event: 'heartbeat',\n            payload: {},\n            ref: this.pendingHeartbeatRef,\n        });\n        this.setAuth(this.accessToken);\n    }\n}\n","/*\n  This file draws heavily from https://github.com/phoenixframework/phoenix/blob/d344ec0a732ab4ee204215b31de69cf4be72e3bf/assets/js/phoenix/presence.js\n  License: https://github.com/phoenixframework/phoenix/blob/d344ec0a732ab4ee204215b31de69cf4be72e3bf/LICENSE.md\n*/\nexport default class RealtimePresence {\n    /**\n     * Initializes the Presence.\n     *\n     * @param channel - The RealtimeSubscription\n     * @param opts - The options,\n     *        for example `{events: {state: 'state', diff: 'diff'}}`\n     */\n    constructor(channel, opts) {\n        this.channel = channel;\n        this.state = {};\n        this.pendingDiffs = [];\n        this.joinRef = null;\n        this.caller = {\n            onJoin: () => { },\n            onLeave: () => { },\n            onSync: () => { },\n        };\n        const events = (opts === null || opts === void 0 ? void 0 : opts.events) || {\n            state: 'presence_state',\n            diff: 'presence_diff',\n        };\n        this.channel.on(events.state, {}, (newState) => {\n            const { onJoin, onLeave, onSync } = this.caller;\n            this.joinRef = this.channel.joinRef();\n            this.state = RealtimePresence.syncState(this.state, newState, onJoin, onLeave);\n            this.pendingDiffs.forEach((diff) => {\n                this.state = RealtimePresence.syncDiff(this.state, diff, onJoin, onLeave);\n            });\n            this.pendingDiffs = [];\n            onSync();\n        });\n        this.channel.on(events.diff, {}, (diff) => {\n            const { onJoin, onLeave, onSync } = this.caller;\n            if (this.inPendingSyncState()) {\n                this.pendingDiffs.push(diff);\n            }\n            else {\n                this.state = RealtimePresence.syncDiff(this.state, diff, onJoin, onLeave);\n                onSync();\n            }\n        });\n    }\n    /**\n     * Used to sync the list of presences on the server with the\n     * client's state.\n     *\n     * An optional `onJoin` and `onLeave` callback can be provided to\n     * react to changes in the client's local presences across\n     * disconnects and reconnects with the server.\n     */\n    static syncState(currentState, newState, onJoin, onLeave) {\n        const state = this.cloneDeep(currentState);\n        const transformedState = this.transformState(newState);\n        const joins = {};\n        const leaves = {};\n        this.map(state, (key, presences) => {\n            if (!transformedState[key]) {\n                leaves[key] = presences;\n            }\n        });\n        this.map(transformedState, (key, newPresences) => {\n            const currentPresences = state[key];\n            if (currentPresences) {\n                const newPresenceIds = newPresences.map((m) => m.presence_id);\n                const curPresenceIds = currentPresences.map((m) => m.presence_id);\n                const joinedPresences = newPresences.filter((m) => curPresenceIds.indexOf(m.presence_id) < 0);\n                const leftPresences = currentPresences.filter((m) => newPresenceIds.indexOf(m.presence_id) < 0);\n                if (joinedPresences.length > 0) {\n                    joins[key] = joinedPresences;\n                }\n                if (leftPresences.length > 0) {\n                    leaves[key] = leftPresences;\n                }\n            }\n            else {\n                joins[key] = newPresences;\n            }\n        });\n        return this.syncDiff(state, { joins, leaves }, onJoin, onLeave);\n    }\n    /**\n     * Used to sync a diff of presence join and leave events from the\n     * server, as they happen.\n     *\n     * Like `syncState`, `syncDiff` accepts optional `onJoin` and\n     * `onLeave` callbacks to react to a user joining or leaving from a\n     * device.\n     */\n    static syncDiff(state, diff, onJoin, onLeave) {\n        const { joins, leaves } = {\n            joins: this.transformState(diff.joins),\n            leaves: this.transformState(diff.leaves),\n        };\n        if (!onJoin) {\n            onJoin = () => { };\n        }\n        if (!onLeave) {\n            onLeave = () => { };\n        }\n        this.map(joins, (key, newPresences) => {\n            const currentPresences = state[key];\n            state[key] = this.cloneDeep(newPresences);\n            if (currentPresences) {\n                const joinedPresenceIds = state[key].map((m) => m.presence_id);\n                const curPresences = currentPresences.filter((m) => joinedPresenceIds.indexOf(m.presence_id) < 0);\n                state[key].unshift(...curPresences);\n            }\n            onJoin(key, currentPresences, newPresences);\n        });\n        this.map(leaves, (key, leftPresences) => {\n            let currentPresences = state[key];\n            if (!currentPresences)\n                return;\n            const presenceIdsToRemove = leftPresences.map((m) => m.presence_id);\n            currentPresences = currentPresences.filter((m) => presenceIdsToRemove.indexOf(m.presence_id) < 0);\n            state[key] = currentPresences;\n            onLeave(key, currentPresences, leftPresences);\n            if (currentPresences.length === 0)\n                delete state[key];\n        });\n        return state;\n    }\n    /**\n     * Returns the array of presences, with selected metadata.\n     */\n    static list(presences, chooser) {\n        if (!chooser) {\n            chooser = (_key, pres) => pres;\n        }\n        return this.map(presences, (key, presences) => chooser(key, presences));\n    }\n    static map(obj, func) {\n        return Object.getOwnPropertyNames(obj).map((key) => func(key, obj[key]));\n    }\n    /**\n     * Remove 'metas' key\n     * Change 'phx_ref' to 'presence_id'\n     * Remove 'phx_ref' and 'phx_ref_prev'\n     *\n     * @example\n     * // returns {\n     *  abc123: [\n     *    { presence_id: '2', user_id: 1 },\n     *    { presence_id: '3', user_id: 2 }\n     *  ]\n     * }\n     * RealtimePresence.transformState({\n     *  abc123: {\n     *    metas: [\n     *      { phx_ref: '2', phx_ref_prev: '1' user_id: 1 },\n     *      { phx_ref: '3', user_id: 2 }\n     *    ]\n     *  }\n     * })\n     */\n    static transformState(state) {\n        state = this.cloneDeep(state);\n        return Object.getOwnPropertyNames(state).reduce((newState, key) => {\n            const presences = state[key];\n            if ('metas' in presences) {\n                newState[key] = presences.metas.map((presence) => {\n                    presence['presence_id'] = presence['phx_ref'];\n                    delete presence['phx_ref'];\n                    delete presence['phx_ref_prev'];\n                    return presence;\n                });\n            }\n            else {\n                newState[key] = presences;\n            }\n            return newState;\n        }, {});\n    }\n    static cloneDeep(obj) {\n        return JSON.parse(JSON.stringify(obj));\n    }\n    onJoin(callback) {\n        this.caller.onJoin = callback;\n    }\n    onLeave(callback) {\n        this.caller.onLeave = callback;\n    }\n    onSync(callback) {\n        this.caller.onSync = callback;\n    }\n    list(by) {\n        return RealtimePresence.list(this.state, by);\n    }\n    inPendingSyncState() {\n        return !this.joinRef || this.joinRef !== this.channel.joinRef();\n    }\n}\n","import { CHANNEL_EVENTS, CHANNEL_STATES } from './lib/constants';\nimport Push from './lib/push';\nimport Timer from './lib/timer';\nexport default class RealtimeSubscription {\n    constructor(topic, params = {}, socket) {\n        this.topic = topic;\n        this.params = params;\n        this.socket = socket;\n        this.bindings = [];\n        this.state = CHANNEL_STATES.closed;\n        this.joinedOnce = false;\n        this.pushBuffer = [];\n        this.timeout = this.socket.timeout;\n        this.joinPush = new Push(this, CHANNEL_EVENTS.join, this.params, this.timeout);\n        this.rejoinTimer = new Timer(() => this.rejoinUntilConnected(), this.socket.reconnectAfterMs);\n        this.joinPush.receive('ok', () => {\n            this.state = CHANNEL_STATES.joined;\n            this.rejoinTimer.reset();\n            this.pushBuffer.forEach((pushEvent) => pushEvent.send());\n            this.pushBuffer = [];\n        });\n        this.onClose(() => {\n            this.rejoinTimer.reset();\n            this.socket.log('channel', `close ${this.topic} ${this.joinRef()}`);\n            this.state = CHANNEL_STATES.closed;\n            this.socket.remove(this);\n        });\n        this.onError((reason) => {\n            if (this.isLeaving() || this.isClosed()) {\n                return;\n            }\n            this.socket.log('channel', `error ${this.topic}`, reason);\n            this.state = CHANNEL_STATES.errored;\n            this.rejoinTimer.scheduleTimeout();\n        });\n        this.joinPush.receive('timeout', () => {\n            if (!this.isJoining()) {\n                return;\n            }\n            this.socket.log('channel', `timeout ${this.topic}`, this.joinPush.timeout);\n            this.state = CHANNEL_STATES.errored;\n            this.rejoinTimer.scheduleTimeout();\n        });\n        this.on(CHANNEL_EVENTS.reply, (payload, ref) => {\n            this.trigger(this.replyEventName(ref), payload);\n        });\n    }\n    rejoinUntilConnected() {\n        this.rejoinTimer.scheduleTimeout();\n        if (this.socket.isConnected()) {\n            this.rejoin();\n        }\n    }\n    subscribe(timeout = this.timeout) {\n        if (this.joinedOnce) {\n            throw `tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance`;\n        }\n        else {\n            this.joinedOnce = true;\n            this.rejoin(timeout);\n            return this.joinPush;\n        }\n    }\n    onClose(callback) {\n        this.on(CHANNEL_EVENTS.close, callback);\n    }\n    onError(callback) {\n        this.on(CHANNEL_EVENTS.error, (reason) => callback(reason));\n    }\n    on(event, callback) {\n        this.bindings.push({ event, callback });\n    }\n    off(event) {\n        this.bindings = this.bindings.filter((bind) => bind.event !== event);\n    }\n    canPush() {\n        return this.socket.isConnected() && this.isJoined();\n    }\n    push(event, payload, timeout = this.timeout) {\n        if (!this.joinedOnce) {\n            throw `tried to push '${event}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;\n        }\n        let pushEvent = new Push(this, event, payload, timeout);\n        if (this.canPush()) {\n            pushEvent.send();\n        }\n        else {\n            pushEvent.startTimeout();\n            this.pushBuffer.push(pushEvent);\n        }\n        return pushEvent;\n    }\n    updateJoinPayload(payload) {\n        this.joinPush.updatePayload(payload);\n    }\n    /**\n     * Leaves the channel\n     *\n     * Unsubscribes from server events, and instructs channel to terminate on server.\n     * Triggers onClose() hooks.\n     *\n     * To receive leave acknowledgements, use the a `receive` hook to bind to the server ack, ie:\n     * channel.unsubscribe().receive(\"ok\", () => alert(\"left!\") )\n     */\n    unsubscribe(timeout = this.timeout) {\n        this.state = CHANNEL_STATES.leaving;\n        let onClose = () => {\n            this.socket.log('channel', `leave ${this.topic}`);\n            this.trigger(CHANNEL_EVENTS.close, 'leave', this.joinRef());\n        };\n        // Destroy joinPush to avoid connection timeouts during unscription phase\n        this.joinPush.destroy();\n        let leavePush = new Push(this, CHANNEL_EVENTS.leave, {}, timeout);\n        leavePush.receive('ok', () => onClose()).receive('timeout', () => onClose());\n        leavePush.send();\n        if (!this.canPush()) {\n            leavePush.trigger('ok', {});\n        }\n        return leavePush;\n    }\n    /**\n     * Overridable message hook\n     *\n     * Receives all events for specialized message handling before dispatching to the channel callbacks.\n     * Must return the payload, modified or unmodified.\n     */\n    onMessage(event, payload, ref) {\n        return payload;\n    }\n    isMember(topic) {\n        return this.topic === topic;\n    }\n    joinRef() {\n        return this.joinPush.ref;\n    }\n    rejoin(timeout = this.timeout) {\n        if (this.isLeaving()) {\n            return;\n        }\n        this.socket.leaveOpenTopic(this.topic);\n        this.state = CHANNEL_STATES.joining;\n        this.joinPush.resend(timeout);\n    }\n    trigger(event, payload, ref) {\n        let { close, error, leave, join } = CHANNEL_EVENTS;\n        let events = [close, error, leave, join];\n        if (ref && events.indexOf(event) >= 0 && ref !== this.joinRef()) {\n            return;\n        }\n        let handledPayload = this.onMessage(event, payload, ref);\n        if (payload && !handledPayload) {\n            throw 'channel onMessage callbacks must return the payload, modified or unmodified';\n        }\n        this.bindings\n            .filter((bind) => {\n            // Bind all events if the user specifies a wildcard.\n            if (bind.event === '*') {\n                return event === (payload === null || payload === void 0 ? void 0 : payload.type);\n            }\n            else {\n                return bind.event === event;\n            }\n        })\n            .map((bind) => bind.callback(handledPayload, ref));\n    }\n    replyEventName(ref) {\n        return `chan_reply_${ref}`;\n    }\n    isClosed() {\n        return this.state === CHANNEL_STATES.closed;\n    }\n    isErrored() {\n        return this.state === CHANNEL_STATES.errored;\n    }\n    isJoined() {\n        return this.state === CHANNEL_STATES.joined;\n    }\n    isJoining() {\n        return this.state === CHANNEL_STATES.joining;\n    }\n    isLeaving() {\n        return this.state === CHANNEL_STATES.leaving;\n    }\n}\n","import * as Transformers from './lib/transformers';\nimport RealtimeClient from './RealtimeClient';\nimport RealtimeSubscription from './RealtimeSubscription';\nimport RealtimeChannel from './RealtimeChannel';\nimport RealtimePresence from './RealtimePresence';\nexport { RealtimeClient, RealtimeSubscription, RealtimeChannel, RealtimePresence, Transformers, };\n","import { version } from './version';\nexport const DEFAULT_HEADERS = { 'X-Client-Info': `realtime-js/${version}` };\nexport const VSN = '1.0.0';\nexport const DEFAULT_TIMEOUT = 10000;\nexport const WS_CLOSE_NORMAL = 1000;\nexport var SOCKET_STATES;\n(function (SOCKET_STATES) {\n    SOCKET_STATES[SOCKET_STATES[\"connecting\"] = 0] = \"connecting\";\n    SOCKET_STATES[SOCKET_STATES[\"open\"] = 1] = \"open\";\n    SOCKET_STATES[SOCKET_STATES[\"closing\"] = 2] = \"closing\";\n    SOCKET_STATES[SOCKET_STATES[\"closed\"] = 3] = \"closed\";\n})(SOCKET_STATES || (SOCKET_STATES = {}));\nexport var CHANNEL_STATES;\n(function (CHANNEL_STATES) {\n    CHANNEL_STATES[\"closed\"] = \"closed\";\n    CHANNEL_STATES[\"errored\"] = \"errored\";\n    CHANNEL_STATES[\"joined\"] = \"joined\";\n    CHANNEL_STATES[\"joining\"] = \"joining\";\n    CHANNEL_STATES[\"leaving\"] = \"leaving\";\n})(CHANNEL_STATES || (CHANNEL_STATES = {}));\nexport var CHANNEL_EVENTS;\n(function (CHANNEL_EVENTS) {\n    CHANNEL_EVENTS[\"close\"] = \"phx_close\";\n    CHANNEL_EVENTS[\"error\"] = \"phx_error\";\n    CHANNEL_EVENTS[\"join\"] = \"phx_join\";\n    CHANNEL_EVENTS[\"reply\"] = \"phx_reply\";\n    CHANNEL_EVENTS[\"leave\"] = \"phx_leave\";\n    CHANNEL_EVENTS[\"access_token\"] = \"access_token\";\n})(CHANNEL_EVENTS || (CHANNEL_EVENTS = {}));\nexport var TRANSPORTS;\n(function (TRANSPORTS) {\n    TRANSPORTS[\"websocket\"] = \"websocket\";\n})(TRANSPORTS || (TRANSPORTS = {}));\nexport var CONNECTION_STATE;\n(function (CONNECTION_STATE) {\n    CONNECTION_STATE[\"Connecting\"] = \"connecting\";\n    CONNECTION_STATE[\"Open\"] = \"open\";\n    CONNECTION_STATE[\"Closing\"] = \"closing\";\n    CONNECTION_STATE[\"Closed\"] = \"closed\";\n})(CONNECTION_STATE || (CONNECTION_STATE = {}));\n","import { DEFAULT_TIMEOUT } from '../lib/constants';\nimport RealtimeSubscription from '../RealtimeSubscription';\nexport default class Push {\n    /**\n     * Initializes the Push\n     *\n     * @param channel The Channel\n     * @param event The event, for example `\"phx_join\"`\n     * @param payload The payload, for example `{user_id: 123}`\n     * @param timeout The push timeout in milliseconds\n     */\n    constructor(channel, event, payload = {}, timeout = DEFAULT_TIMEOUT) {\n        this.channel = channel;\n        this.event = event;\n        this.payload = payload;\n        this.timeout = timeout;\n        this.sent = false;\n        this.timeoutTimer = undefined;\n        this.ref = '';\n        this.receivedResp = null;\n        this.recHooks = [];\n        this.refEvent = null;\n    }\n    resend(timeout) {\n        this.timeout = timeout;\n        this._cancelRefEvent();\n        this.ref = '';\n        this.refEvent = null;\n        this.receivedResp = null;\n        this.sent = false;\n        this.send();\n    }\n    send() {\n        if (this._hasReceived('timeout')) {\n            return;\n        }\n        this.startTimeout();\n        this.sent = true;\n        this.channel.socket.push({\n            topic: this.channel.topic,\n            event: this.event,\n            payload: this.payload,\n            ref: this.ref,\n        });\n    }\n    updatePayload(payload) {\n        this.payload = Object.assign(Object.assign({}, this.payload), payload);\n    }\n    receive(status, callback) {\n        var _a;\n        if (this._hasReceived(status)) {\n            callback((_a = this.receivedResp) === null || _a === void 0 ? void 0 : _a.response);\n        }\n        this.recHooks.push({ status, callback });\n        return this;\n    }\n    startTimeout() {\n        if (this.timeoutTimer) {\n            return;\n        }\n        this.ref = this.channel.socket.makeRef();\n        this.refEvent = this.channel.replyEventName(this.ref);\n        const callback = (payload) => {\n            this._cancelRefEvent();\n            this._cancelTimeout();\n            this.receivedResp = payload;\n            this._matchReceive(payload);\n        };\n        if (this.channel instanceof RealtimeSubscription) {\n            this.channel.on(this.refEvent, callback);\n        }\n        else {\n            this.channel.on(this.refEvent, {}, callback);\n        }\n        this.timeoutTimer = setTimeout(() => {\n            this.trigger('timeout', {});\n        }, this.timeout);\n    }\n    trigger(status, response) {\n        if (this.refEvent)\n            this.channel.trigger(this.refEvent, { status, response });\n    }\n    destroy() {\n        this._cancelRefEvent();\n        this._cancelTimeout();\n    }\n    _cancelRefEvent() {\n        if (!this.refEvent) {\n            return;\n        }\n        if (this.channel instanceof RealtimeSubscription) {\n            this.channel.off(this.refEvent);\n        }\n        else {\n            this.channel.off(this.refEvent, {});\n        }\n    }\n    _cancelTimeout() {\n        clearTimeout(this.timeoutTimer);\n        this.timeoutTimer = undefined;\n    }\n    _matchReceive({ status, response, }) {\n        this.recHooks\n            .filter((h) => h.status === status)\n            .forEach((h) => h.callback(response));\n    }\n    _hasReceived(status) {\n        return this.receivedResp && this.receivedResp.status === status;\n    }\n}\n","// This file draws heavily from https://github.com/phoenixframework/phoenix/commit/cf098e9cf7a44ee6479d31d911a97d3c7430c6fe\n// License: https://github.com/phoenixframework/phoenix/blob/master/LICENSE.md\nexport default class Serializer {\n    constructor() {\n        this.HEADER_LENGTH = 1;\n    }\n    decode(rawPayload, callback) {\n        if (rawPayload.constructor === ArrayBuffer) {\n            return callback(this._binaryDecode(rawPayload));\n        }\n        if (typeof rawPayload === 'string') {\n            return callback(JSON.parse(rawPayload));\n        }\n        return callback({});\n    }\n    _binaryDecode(buffer) {\n        const view = new DataView(buffer);\n        const decoder = new TextDecoder();\n        return this._decodeBroadcast(buffer, view, decoder);\n    }\n    _decodeBroadcast(buffer, view, decoder) {\n        const topicSize = view.getUint8(1);\n        const eventSize = view.getUint8(2);\n        let offset = this.HEADER_LENGTH + 2;\n        const topic = decoder.decode(buffer.slice(offset, offset + topicSize));\n        offset = offset + topicSize;\n        const event = decoder.decode(buffer.slice(offset, offset + eventSize));\n        offset = offset + eventSize;\n        const data = JSON.parse(decoder.decode(buffer.slice(offset, buffer.byteLength)));\n        return { ref: null, topic: topic, event: event, payload: data };\n    }\n}\n","/**\n * Creates a timer that accepts a `timerCalc` function to perform calculated timeout retries, such as exponential backoff.\n *\n * @example\n *    let reconnectTimer = new Timer(() => this.connect(), function(tries){\n *      return [1000, 5000, 10000][tries - 1] || 10000\n *    })\n *    reconnectTimer.scheduleTimeout() // fires after 1000\n *    reconnectTimer.scheduleTimeout() // fires after 5000\n *    reconnectTimer.reset()\n *    reconnectTimer.scheduleTimeout() // fires after 1000\n */\nexport default class Timer {\n    constructor(callback, timerCalc) {\n        this.callback = callback;\n        this.timerCalc = timerCalc;\n        this.timer = undefined;\n        this.tries = 0;\n        this.callback = callback;\n        this.timerCalc = timerCalc;\n    }\n    reset() {\n        this.tries = 0;\n        clearTimeout(this.timer);\n    }\n    // Cancels any previous scheduleTimeout and schedules callback\n    scheduleTimeout() {\n        clearTimeout(this.timer);\n        this.timer = setTimeout(() => {\n            this.tries = this.tries + 1;\n            this.callback();\n        }, this.timerCalc(this.tries + 1));\n    }\n}\n","/**\n * Helpers to convert the change Payload into native JS types.\n */\n// Adapted from epgsql (src/epgsql_binary.erl), this module licensed under\n// 3-clause BSD found here: https://raw.githubusercontent.com/epgsql/epgsql/devel/LICENSE\nexport var PostgresTypes;\n(function (PostgresTypes) {\n    PostgresTypes[\"abstime\"] = \"abstime\";\n    PostgresTypes[\"bool\"] = \"bool\";\n    PostgresTypes[\"date\"] = \"date\";\n    PostgresTypes[\"daterange\"] = \"daterange\";\n    PostgresTypes[\"float4\"] = \"float4\";\n    PostgresTypes[\"float8\"] = \"float8\";\n    PostgresTypes[\"int2\"] = \"int2\";\n    PostgresTypes[\"int4\"] = \"int4\";\n    PostgresTypes[\"int4range\"] = \"int4range\";\n    PostgresTypes[\"int8\"] = \"int8\";\n    PostgresTypes[\"int8range\"] = \"int8range\";\n    PostgresTypes[\"json\"] = \"json\";\n    PostgresTypes[\"jsonb\"] = \"jsonb\";\n    PostgresTypes[\"money\"] = \"money\";\n    PostgresTypes[\"numeric\"] = \"numeric\";\n    PostgresTypes[\"oid\"] = \"oid\";\n    PostgresTypes[\"reltime\"] = \"reltime\";\n    PostgresTypes[\"text\"] = \"text\";\n    PostgresTypes[\"time\"] = \"time\";\n    PostgresTypes[\"timestamp\"] = \"timestamp\";\n    PostgresTypes[\"timestamptz\"] = \"timestamptz\";\n    PostgresTypes[\"timetz\"] = \"timetz\";\n    PostgresTypes[\"tsrange\"] = \"tsrange\";\n    PostgresTypes[\"tstzrange\"] = \"tstzrange\";\n})(PostgresTypes || (PostgresTypes = {}));\n/**\n * Takes an array of columns and an object of string values then converts each string value\n * to its mapped type.\n *\n * @param {{name: String, type: String}[]} columns\n * @param {Object} record\n * @param {Object} options The map of various options that can be applied to the mapper\n * @param {Array} options.skipTypes The array of types that should not be converted\n *\n * @example convertChangeData([{name: 'first_name', type: 'text'}, {name: 'age', type: 'int4'}], {first_name: 'Paul', age:'33'}, {})\n * //=>{ first_name: 'Paul', age: 33 }\n */\nexport const convertChangeData = (columns, record, options = {}) => {\n    var _a;\n    const skipTypes = (_a = options.skipTypes) !== null && _a !== void 0 ? _a : [];\n    return Object.keys(record).reduce((acc, rec_key) => {\n        acc[rec_key] = convertColumn(rec_key, columns, record, skipTypes);\n        return acc;\n    }, {});\n};\n/**\n * Converts the value of an individual column.\n *\n * @param {String} columnName The column that you want to convert\n * @param {{name: String, type: String}[]} columns All of the columns\n * @param {Object} record The map of string values\n * @param {Array} skipTypes An array of types that should not be converted\n * @return {object} Useless information\n *\n * @example convertColumn('age', [{name: 'first_name', type: 'text'}, {name: 'age', type: 'int4'}], {first_name: 'Paul', age: '33'}, [])\n * //=> 33\n * @example convertColumn('age', [{name: 'first_name', type: 'text'}, {name: 'age', type: 'int4'}], {first_name: 'Paul', age: '33'}, ['int4'])\n * //=> \"33\"\n */\nexport const convertColumn = (columnName, columns, record, skipTypes) => {\n    const column = columns.find((x) => x.name === columnName);\n    const colType = column === null || column === void 0 ? void 0 : column.type;\n    const value = record[columnName];\n    if (colType && !skipTypes.includes(colType)) {\n        return convertCell(colType, value);\n    }\n    return noop(value);\n};\n/**\n * If the value of the cell is `null`, returns null.\n * Otherwise converts the string value to the correct type.\n * @param {String} type A postgres column type\n * @param {String} stringValue The cell value\n *\n * @example convertCell('bool', 't')\n * //=> true\n * @example convertCell('int8', '10')\n * //=> 10\n * @example convertCell('_int4', '{1,2,3,4}')\n * //=> [1,2,3,4]\n */\nexport const convertCell = (type, value) => {\n    // if data type is an array\n    if (type.charAt(0) === '_') {\n        const dataType = type.slice(1, type.length);\n        return toArray(value, dataType);\n    }\n    // If not null, convert to correct type.\n    switch (type) {\n        case PostgresTypes.bool:\n            return toBoolean(value);\n        case PostgresTypes.float4:\n        case PostgresTypes.float8:\n        case PostgresTypes.int2:\n        case PostgresTypes.int4:\n        case PostgresTypes.int8:\n        case PostgresTypes.numeric:\n        case PostgresTypes.oid:\n            return toNumber(value);\n        case PostgresTypes.json:\n        case PostgresTypes.jsonb:\n            return toJson(value);\n        case PostgresTypes.timestamp:\n            return toTimestampString(value); // Format to be consistent with PostgREST\n        case PostgresTypes.abstime: // To allow users to cast it based on Timezone\n        case PostgresTypes.date: // To allow users to cast it based on Timezone\n        case PostgresTypes.daterange:\n        case PostgresTypes.int4range:\n        case PostgresTypes.int8range:\n        case PostgresTypes.money:\n        case PostgresTypes.reltime: // To allow users to cast it based on Timezone\n        case PostgresTypes.text:\n        case PostgresTypes.time: // To allow users to cast it based on Timezone\n        case PostgresTypes.timestamptz: // To allow users to cast it based on Timezone\n        case PostgresTypes.timetz: // To allow users to cast it based on Timezone\n        case PostgresTypes.tsrange:\n        case PostgresTypes.tstzrange:\n            return noop(value);\n        default:\n            // Return the value for remaining types\n            return noop(value);\n    }\n};\nconst noop = (value) => {\n    return value;\n};\nexport const toBoolean = (value) => {\n    switch (value) {\n        case 't':\n            return true;\n        case 'f':\n            return false;\n        default:\n            return value;\n    }\n};\nexport const toNumber = (value) => {\n    if (typeof value === 'string') {\n        const parsedValue = parseFloat(value);\n        if (!Number.isNaN(parsedValue)) {\n            return parsedValue;\n        }\n    }\n    return value;\n};\nexport const toJson = (value) => {\n    if (typeof value === 'string') {\n        try {\n            return JSON.parse(value);\n        }\n        catch (error) {\n            console.log(`JSON parse error: ${error}`);\n            return value;\n        }\n    }\n    return value;\n};\n/**\n * Converts a Postgres Array into a native JS array\n *\n * @example toArray('{}', 'int4')\n * //=> []\n * @example toArray('{\"[2021-01-01,2021-12-31)\",\"(2021-01-01,2021-12-32]\"}', 'daterange')\n * //=> ['[2021-01-01,2021-12-31)', '(2021-01-01,2021-12-32]']\n * @example toArray([1,2,3,4], 'int4')\n * //=> [1,2,3,4]\n */\nexport const toArray = (value, type) => {\n    if (typeof value !== 'string') {\n        return value;\n    }\n    const lastIdx = value.length - 1;\n    const closeBrace = value[lastIdx];\n    const openBrace = value[0];\n    // Confirm value is a Postgres array by checking curly brackets\n    if (openBrace === '{' && closeBrace === '}') {\n        let arr;\n        const valTrim = value.slice(1, lastIdx);\n        // TODO: find a better solution to separate Postgres array data\n        try {\n            arr = JSON.parse('[' + valTrim + ']');\n        }\n        catch (_) {\n            // WARNING: splitting on comma does not cover all edge cases\n            arr = valTrim ? valTrim.split(',') : [];\n        }\n        return arr.map((val) => convertCell(type, val));\n    }\n    return value;\n};\n/**\n * Fixes timestamp to be ISO-8601. Swaps the space between the date and time for a 'T'\n * See https://github.com/supabase/supabase/issues/18\n *\n * @example toTimestampString('2019-09-10 00:00:00')\n * //=> '2019-09-10T00:00:00'\n */\nexport const toTimestampString = (value) => {\n    if (typeof value === 'string') {\n        return value.replace(' ', 'T');\n    }\n    return value;\n};\n","export const version = '1.7.2';\n","import { StorageBucketApi, StorageFileApi } from './lib';\nexport class StorageClient extends StorageBucketApi {\n    constructor(url, headers = {}, fetch) {\n        super(url, headers, fetch);\n    }\n    /**\n     * Perform file operation in a bucket.\n     *\n     * @param id The bucket id to operate on.\n     */\n    from(id) {\n        return new StorageFileApi(this.url, this.headers, id, this.fetch);\n    }\n}\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { DEFAULT_HEADERS } from './constants';\nimport { get, post, put, remove } from './fetch';\nimport { resolveFetch } from './helpers';\nexport class StorageBucketApi {\n    constructor(url, headers = {}, fetch) {\n        this.url = url;\n        this.headers = Object.assign(Object.assign({}, DEFAULT_HEADERS), headers);\n        this.fetch = resolveFetch(fetch);\n    }\n    /**\n     * Retrieves the details of all Storage buckets within an existing project.\n     */\n    listBuckets() {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const data = yield get(this.fetch, `${this.url}/bucket`, { headers: this.headers });\n                return { data, error: null };\n            }\n            catch (error) {\n                return { data: null, error };\n            }\n        });\n    }\n    /**\n     * Retrieves the details of an existing Storage bucket.\n     *\n     * @param id The unique identifier of the bucket you would like to retrieve.\n     */\n    getBucket(id) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const data = yield get(this.fetch, `${this.url}/bucket/${id}`, { headers: this.headers });\n                return { data, error: null };\n            }\n            catch (error) {\n                return { data: null, error };\n            }\n        });\n    }\n    /**\n     * Creates a new Storage bucket\n     *\n     * @param id A unique identifier for the bucket you are creating.\n     * @returns newly created bucket id\n     */\n    createBucket(id, options = { public: false }) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const data = yield post(this.fetch, `${this.url}/bucket`, { id, name: id, public: options.public }, { headers: this.headers });\n                return { data: data.name, error: null };\n            }\n            catch (error) {\n                return { data: null, error };\n            }\n        });\n    }\n    /**\n     * Updates a new Storage bucket\n     *\n     * @param id A unique identifier for the bucket you are updating.\n     */\n    updateBucket(id, options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const data = yield put(this.fetch, `${this.url}/bucket/${id}`, { id, name: id, public: options.public }, { headers: this.headers });\n                return { data, error: null };\n            }\n            catch (error) {\n                return { data: null, error };\n            }\n        });\n    }\n    /**\n     * Removes all objects inside a single bucket.\n     *\n     * @param id The unique identifier of the bucket you would like to empty.\n     */\n    emptyBucket(id) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const data = yield post(this.fetch, `${this.url}/bucket/${id}/empty`, {}, { headers: this.headers });\n                return { data, error: null };\n            }\n            catch (error) {\n                return { data: null, error };\n            }\n        });\n    }\n    /**\n     * Deletes an existing bucket. A bucket can't be deleted with existing objects inside it.\n     * You must first `empty()` the bucket.\n     *\n     * @param id The unique identifier of the bucket you would like to delete.\n     */\n    deleteBucket(id) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const data = yield remove(this.fetch, `${this.url}/bucket/${id}`, {}, { headers: this.headers });\n                return { data, error: null };\n            }\n            catch (error) {\n                return { data: null, error };\n            }\n        });\n    }\n}\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { get, post, remove } from './fetch';\nimport { resolveFetch } from './helpers';\nconst DEFAULT_SEARCH_OPTIONS = {\n    limit: 100,\n    offset: 0,\n    sortBy: {\n        column: 'name',\n        order: 'asc',\n    },\n};\nconst DEFAULT_FILE_OPTIONS = {\n    cacheControl: '3600',\n    contentType: 'text/plain;charset=UTF-8',\n    upsert: false,\n};\nexport class StorageFileApi {\n    constructor(url, headers = {}, bucketId, fetch) {\n        this.url = url;\n        this.headers = headers;\n        this.bucketId = bucketId;\n        this.fetch = resolveFetch(fetch);\n    }\n    /**\n     * Uploads a file to an existing bucket or replaces an existing file at the specified path with a new one.\n     *\n     * @param method HTTP method.\n     * @param path The relative file path. Should be of the format `folder/subfolder/filename.png`. The bucket must already exist before attempting to upload.\n     * @param fileBody The body of the file to be stored in the bucket.\n     * @param fileOptions HTTP headers.\n     * `cacheControl`: string, the `Cache-Control: max-age=<seconds>` seconds value.\n     * `contentType`: string, the `Content-Type` header value. Should be specified if using a `fileBody` that is neither `Blob` nor `File` nor `FormData`, otherwise will default to `text/plain;charset=UTF-8`.\n     * `upsert`: boolean, whether to perform an upsert.\n     */\n    uploadOrUpdate(method, path, fileBody, fileOptions) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                let body;\n                const options = Object.assign(Object.assign({}, DEFAULT_FILE_OPTIONS), fileOptions);\n                const headers = Object.assign(Object.assign({}, this.headers), (method === 'POST' && { 'x-upsert': String(options.upsert) }));\n                if (typeof Blob !== 'undefined' && fileBody instanceof Blob) {\n                    body = new FormData();\n                    body.append('cacheControl', options.cacheControl);\n                    body.append('', fileBody);\n                }\n                else if (typeof FormData !== 'undefined' && fileBody instanceof FormData) {\n                    body = fileBody;\n                    body.append('cacheControl', options.cacheControl);\n                }\n                else {\n                    body = fileBody;\n                    headers['cache-control'] = `max-age=${options.cacheControl}`;\n                    headers['content-type'] = options.contentType;\n                }\n                const cleanPath = this._removeEmptyFolders(path);\n                const _path = this._getFinalPath(cleanPath);\n                const res = yield this.fetch(`${this.url}/object/${_path}`, {\n                    method,\n                    body: body,\n                    headers,\n                });\n                if (res.ok) {\n                    // const data = await res.json()\n                    // temporary fix till backend is updated to the latest storage-api version\n                    return { data: { Key: _path }, error: null };\n                }\n                else {\n                    const error = yield res.json();\n                    return { data: null, error };\n                }\n            }\n            catch (error) {\n                return { data: null, error };\n            }\n        });\n    }\n    /**\n     * Uploads a file to an existing bucket.\n     *\n     * @param path The relative file path. Should be of the format `folder/subfolder/filename.png`. The bucket must already exist before attempting to upload.\n     * @param fileBody The body of the file to be stored in the bucket.\n     * @param fileOptions HTTP headers.\n     * `cacheControl`: string, the `Cache-Control: max-age=<seconds>` seconds value.\n     * `contentType`: string, the `Content-Type` header value. Should be specified if using a `fileBody` that is neither `Blob` nor `File` nor `FormData`, otherwise will default to `text/plain;charset=UTF-8`.\n     * `upsert`: boolean, whether to perform an upsert.\n     */\n    upload(path, fileBody, fileOptions) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return this.uploadOrUpdate('POST', path, fileBody, fileOptions);\n        });\n    }\n    /**\n     * Replaces an existing file at the specified path with a new one.\n     *\n     * @param path The relative file path. Should be of the format `folder/subfolder/filename.png`. The bucket must already exist before attempting to upload.\n     * @param fileBody The body of the file to be stored in the bucket.\n     * @param fileOptions HTTP headers.\n     * `cacheControl`: string, the `Cache-Control: max-age=<seconds>` seconds value.\n     * `contentType`: string, the `Content-Type` header value. Should be specified if using a `fileBody` that is neither `Blob` nor `File` nor `FormData`, otherwise will default to `text/plain;charset=UTF-8`.\n     * `upsert`: boolean, whether to perform an upsert.\n     */\n    update(path, fileBody, fileOptions) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return this.uploadOrUpdate('PUT', path, fileBody, fileOptions);\n        });\n    }\n    /**\n     * Moves an existing file.\n     *\n     * @param fromPath The original file path, including the current file name. For example `folder/image.png`.\n     * @param toPath The new file path, including the new file name. For example `folder/image-new.png`.\n     */\n    move(fromPath, toPath) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const data = yield post(this.fetch, `${this.url}/object/move`, { bucketId: this.bucketId, sourceKey: fromPath, destinationKey: toPath }, { headers: this.headers });\n                return { data, error: null };\n            }\n            catch (error) {\n                return { data: null, error };\n            }\n        });\n    }\n    /**\n     * Copies an existing file.\n     *\n     * @param fromPath The original file path, including the current file name. For example `folder/image.png`.\n     * @param toPath The new file path, including the new file name. For example `folder/image-copy.png`.\n     */\n    copy(fromPath, toPath) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const data = yield post(this.fetch, `${this.url}/object/copy`, { bucketId: this.bucketId, sourceKey: fromPath, destinationKey: toPath }, { headers: this.headers });\n                return { data, error: null };\n            }\n            catch (error) {\n                return { data: null, error };\n            }\n        });\n    }\n    /**\n     * Create signed URL to download file without requiring permissions. This URL can be valid for a set number of seconds.\n     *\n     * @param path The file path to be downloaded, including the current file name. For example `folder/image.png`.\n     * @param expiresIn The number of seconds until the signed URL expires. For example, `60` for a URL which is valid for one minute.\n     */\n    createSignedUrl(path, expiresIn) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const _path = this._getFinalPath(path);\n                let data = yield post(this.fetch, `${this.url}/object/sign/${_path}`, { expiresIn }, { headers: this.headers });\n                const signedURL = `${this.url}${data.signedURL}`;\n                data = { signedURL };\n                return { data, error: null, signedURL };\n            }\n            catch (error) {\n                return { data: null, error, signedURL: null };\n            }\n        });\n    }\n    /**\n     * Create signed URLs to download files without requiring permissions. These URLs can be valid for a set number of seconds.\n     *\n     * @param paths The file paths to be downloaded, including the current file names. For example `['folder/image.png', 'folder2/image2.png']`.\n     * @param expiresIn The number of seconds until the signed URLs expire. For example, `60` for URLs which are valid for one minute.\n     */\n    createSignedUrls(paths, expiresIn) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const data = yield post(this.fetch, `${this.url}/object/sign/${this.bucketId}`, { expiresIn, paths }, { headers: this.headers });\n                return {\n                    data: data.map((datum) => (Object.assign(Object.assign({}, datum), { signedURL: datum.signedURL ? `${this.url}${datum.signedURL}` : null }))),\n                    error: null,\n                };\n            }\n            catch (error) {\n                return { data: null, error };\n            }\n        });\n    }\n    /**\n     * Downloads a file.\n     *\n     * @param path The file path to be downloaded, including the path and file name. For example `folder/image.png`.\n     */\n    download(path) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const _path = this._getFinalPath(path);\n                const res = yield get(this.fetch, `${this.url}/object/${_path}`, {\n                    headers: this.headers,\n                    noResolveJson: true,\n                });\n                const data = yield res.blob();\n                return { data, error: null };\n            }\n            catch (error) {\n                return { data: null, error };\n            }\n        });\n    }\n    /**\n     * Retrieve URLs for assets in public buckets\n     *\n     * @param path The file path to be downloaded, including the path and file name. For example `folder/image.png`.\n     */\n    getPublicUrl(path) {\n        try {\n            const _path = this._getFinalPath(path);\n            const publicURL = `${this.url}/object/public/${_path}`;\n            const data = { publicURL };\n            return { data, error: null, publicURL };\n        }\n        catch (error) {\n            return { data: null, error, publicURL: null };\n        }\n    }\n    /**\n     * Deletes files within the same bucket\n     *\n     * @param paths An array of files to be deleted, including the path and file name. For example [`folder/image.png`].\n     */\n    remove(paths) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const data = yield remove(this.fetch, `${this.url}/object/${this.bucketId}`, { prefixes: paths }, { headers: this.headers });\n                return { data, error: null };\n            }\n            catch (error) {\n                return { data: null, error };\n            }\n        });\n    }\n    /**\n     * Get file metadata\n     * @param id the file id to retrieve metadata\n     */\n    // async getMetadata(id: string): Promise<{ data: Metadata | null; error: Error | null }> {\n    //   try {\n    //     const data = await get(`${this.url}/metadata/${id}`, { headers: this.headers })\n    //     return { data, error: null }\n    //   } catch (error) {\n    //     return { data: null, error }\n    //   }\n    // }\n    /**\n     * Update file metadata\n     * @param id the file id to update metadata\n     * @param meta the new file metadata\n     */\n    // async updateMetadata(\n    //   id: string,\n    //   meta: Metadata\n    // ): Promise<{ data: Metadata | null; error: Error | null }> {\n    //   try {\n    //     const data = await post(`${this.url}/metadata/${id}`, { ...meta }, { headers: this.headers })\n    //     return { data, error: null }\n    //   } catch (error) {\n    //     return { data: null, error }\n    //   }\n    // }\n    /**\n     * Lists all the files within a bucket.\n     * @param path The folder path.\n     * @param options Search options, including `limit`, `offset`, and `sortBy`.\n     * @param parameters Fetch parameters, currently only supports `signal`, which is an AbortController's signal\n     */\n    list(path, options, parameters) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const body = Object.assign(Object.assign(Object.assign({}, DEFAULT_SEARCH_OPTIONS), options), { prefix: path || '' });\n                const data = yield post(this.fetch, `${this.url}/object/list/${this.bucketId}`, body, { headers: this.headers }, parameters);\n                return { data, error: null };\n            }\n            catch (error) {\n                return { data: null, error };\n            }\n        });\n    }\n    _getFinalPath(path) {\n        return `${this.bucketId}/${path}`;\n    }\n    _removeEmptyFolders(path) {\n        return path.replace(/^\\/|\\/$/g, '').replace(/\\/+/g, '/');\n    }\n}\n","import { version } from './version';\nexport const DEFAULT_HEADERS = { 'X-Client-Info': `storage-js/${version}` };\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nconst _getErrorMessage = (err) => err.msg || err.message || err.error_description || err.error || JSON.stringify(err);\nconst handleError = (error, reject) => {\n    if (typeof error.json !== 'function') {\n        return reject(error);\n    }\n    error.json().then((err) => {\n        return reject({\n            message: _getErrorMessage(err),\n            status: (error === null || error === void 0 ? void 0 : error.status) || 500,\n        });\n    });\n};\nconst _getRequestParams = (method, options, parameters, body) => {\n    const params = { method, headers: (options === null || options === void 0 ? void 0 : options.headers) || {} };\n    if (method === 'GET') {\n        return params;\n    }\n    params.headers = Object.assign({ 'Content-Type': 'application/json' }, options === null || options === void 0 ? void 0 : options.headers);\n    params.body = JSON.stringify(body);\n    return Object.assign(Object.assign({}, params), parameters);\n};\nfunction _handleRequest(fetcher, method, url, options, parameters, body) {\n    return __awaiter(this, void 0, void 0, function* () {\n        return new Promise((resolve, reject) => {\n            fetcher(url, _getRequestParams(method, options, parameters, body))\n                .then((result) => {\n                if (!result.ok)\n                    throw result;\n                if (options === null || options === void 0 ? void 0 : options.noResolveJson)\n                    return resolve(result);\n                return result.json();\n            })\n                .then((data) => resolve(data))\n                .catch((error) => handleError(error, reject));\n        });\n    });\n}\nexport function get(fetcher, url, options, parameters) {\n    return __awaiter(this, void 0, void 0, function* () {\n        return _handleRequest(fetcher, 'GET', url, options, parameters);\n    });\n}\nexport function post(fetcher, url, body, options, parameters) {\n    return __awaiter(this, void 0, void 0, function* () {\n        return _handleRequest(fetcher, 'POST', url, options, parameters, body);\n    });\n}\nexport function put(fetcher, url, body, options, parameters) {\n    return __awaiter(this, void 0, void 0, function* () {\n        return _handleRequest(fetcher, 'PUT', url, options, parameters, body);\n    });\n}\nexport function remove(fetcher, url, body, options, parameters) {\n    return __awaiter(this, void 0, void 0, function* () {\n        return _handleRequest(fetcher, 'DELETE', url, options, parameters, body);\n    });\n}\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nexport const resolveFetch = (customFetch) => {\n    let _fetch;\n    if (customFetch) {\n        _fetch = customFetch;\n    }\n    else if (typeof fetch === 'undefined') {\n        _fetch = (...args) => __awaiter(void 0, void 0, void 0, function* () { return yield (yield import('cross-fetch')).fetch(...args); });\n    }\n    else {\n        _fetch = fetch;\n    }\n    return (...args) => _fetch(...args);\n};\n","// generated by genversion\nexport const version = '0.0.0';\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { DEFAULT_HEADERS, STORAGE_KEY } from './lib/constants';\nimport { stripTrailingSlash, isBrowser } from './lib/helpers';\nimport { SupabaseAuthClient } from './lib/SupabaseAuthClient';\nimport { SupabaseQueryBuilder } from './lib/SupabaseQueryBuilder';\nimport { SupabaseStorageClient } from '@supabase/storage-js';\nimport { FunctionsClient } from '@supabase/functions-js';\nimport { PostgrestClient } from '@supabase/postgrest-js';\nimport { RealtimeClient, } from '@supabase/realtime-js';\nconst DEFAULT_OPTIONS = {\n    schema: 'public',\n    autoRefreshToken: true,\n    persistSession: true,\n    detectSessionInUrl: true,\n    multiTab: true,\n    headers: DEFAULT_HEADERS,\n};\n/**\n * Supabase Client.\n *\n * An isomorphic Javascript client for interacting with Postgres.\n */\nexport default class SupabaseClient {\n    /**\n     * Create a new client for use in the browser.\n     * @param supabaseUrl The unique Supabase URL which is supplied when you create a new project in your project dashboard.\n     * @param supabaseKey The unique Supabase Key which is supplied when you create a new project in your project dashboard.\n     * @param options.schema You can switch in between schemas. The schema needs to be on the list of exposed schemas inside Supabase.\n     * @param options.autoRefreshToken Set to \"true\" if you want to automatically refresh the token before expiring.\n     * @param options.persistSession Set to \"true\" if you want to automatically save the user session into local storage.\n     * @param options.detectSessionInUrl Set to \"true\" if you want to automatically detects OAuth grants in the URL and signs in the user.\n     * @param options.headers Any additional headers to send with each network request.\n     * @param options.realtime Options passed along to realtime-js constructor.\n     * @param options.multiTab Set to \"false\" if you want to disable multi-tab/window events.\n     * @param options.fetch A custom fetch implementation.\n     */\n    constructor(supabaseUrl, supabaseKey, options) {\n        this.supabaseUrl = supabaseUrl;\n        this.supabaseKey = supabaseKey;\n        if (!supabaseUrl)\n            throw new Error('supabaseUrl is required.');\n        if (!supabaseKey)\n            throw new Error('supabaseKey is required.');\n        const _supabaseUrl = stripTrailingSlash(supabaseUrl);\n        const settings = Object.assign(Object.assign({}, DEFAULT_OPTIONS), options);\n        this.restUrl = `${_supabaseUrl}/rest/v1`;\n        this.realtimeUrl = `${_supabaseUrl}/realtime/v1`.replace('http', 'ws');\n        this.authUrl = `${_supabaseUrl}/auth/v1`;\n        this.storageUrl = `${_supabaseUrl}/storage/v1`;\n        const isPlatform = _supabaseUrl.match(/(supabase\\.co)|(supabase\\.in)/);\n        if (isPlatform) {\n            const urlParts = _supabaseUrl.split('.');\n            this.functionsUrl = `${urlParts[0]}.functions.${urlParts[1]}.${urlParts[2]}`;\n        }\n        else {\n            this.functionsUrl = `${_supabaseUrl}/functions/v1`;\n        }\n        this.schema = settings.schema;\n        this.multiTab = settings.multiTab;\n        this.fetch = settings.fetch;\n        this.headers = Object.assign(Object.assign({}, DEFAULT_HEADERS), options === null || options === void 0 ? void 0 : options.headers);\n        this.shouldThrowOnError = settings.shouldThrowOnError || false;\n        this.auth = this._initSupabaseAuthClient(settings);\n        this.realtime = this._initRealtimeClient(Object.assign({ headers: this.headers }, settings.realtime));\n        this._listenForAuthEvents();\n        this._listenForMultiTabEvents();\n        // In the future we might allow the user to pass in a logger to receive these events.\n        // this.realtime.onOpen(() => console.log('OPEN'))\n        // this.realtime.onClose(() => console.log('CLOSED'))\n        // this.realtime.onError((e: Error) => console.log('Socket error', e))\n    }\n    /**\n     * Supabase Functions allows you to deploy and invoke edge functions.\n     */\n    get functions() {\n        return new FunctionsClient(this.functionsUrl, {\n            headers: this._getAuthHeaders(),\n            customFetch: this.fetch,\n        });\n    }\n    /**\n     * Supabase Storage allows you to manage user-generated content, such as photos or videos.\n     */\n    get storage() {\n        return new SupabaseStorageClient(this.storageUrl, this._getAuthHeaders(), this.fetch);\n    }\n    /**\n     * Perform a table operation.\n     *\n     * @param table The table name to operate on.\n     */\n    from(table) {\n        const url = `${this.restUrl}/${table}`;\n        return new SupabaseQueryBuilder(url, {\n            headers: this._getAuthHeaders(),\n            schema: this.schema,\n            realtime: this.realtime,\n            table,\n            fetch: this.fetch,\n            shouldThrowOnError: this.shouldThrowOnError,\n        });\n    }\n    /**\n     * Perform a function call.\n     *\n     * @param fn  The function name to call.\n     * @param params  The parameters to pass to the function call.\n     * @param head   When set to true, no data will be returned.\n     * @param count  Count algorithm to use to count rows in a table.\n     *\n     */\n    rpc(fn, params, { head = false, count = null, } = {}) {\n        const rest = this._initPostgRESTClient();\n        return rest.rpc(fn, params, { head, count });\n    }\n    /**\n     * Creates a channel with Broadcast and Presence.\n     * Activated when vsndate query param is present in the WebSocket URL.\n     */\n    channel(name, opts) {\n        var _a, _b;\n        const userToken = (_b = (_a = this.auth.session()) === null || _a === void 0 ? void 0 : _a.access_token) !== null && _b !== void 0 ? _b : this.supabaseKey;\n        if (!this.realtime.isConnected()) {\n            this.realtime.connect();\n        }\n        return this.realtime.channel(name, Object.assign(Object.assign({}, opts), { user_token: userToken }));\n    }\n    /**\n     * Closes and removes all subscriptions and returns a list of removed\n     * subscriptions and their errors.\n     */\n    removeAllSubscriptions() {\n        return __awaiter(this, void 0, void 0, function* () {\n            const allSubs = this.getSubscriptions().slice();\n            const allSubPromises = allSubs.map((sub) => this.removeSubscription(sub));\n            const allRemovedSubs = yield Promise.all(allSubPromises);\n            return allRemovedSubs.map(({ error }, i) => {\n                return {\n                    data: { subscription: allSubs[i] },\n                    error,\n                };\n            });\n        });\n    }\n    /**\n     * Closes and removes a channel and returns the number of open channels.\n     *\n     * @param channel The channel you want to close and remove.\n     */\n    removeChannel(channel) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const { error } = yield this._closeSubscription(channel);\n            const allChans = this.getSubscriptions();\n            const openChanCount = allChans.filter((chan) => chan.isJoined()).length;\n            if (allChans.length === 0)\n                yield this.realtime.disconnect();\n            return { data: { openChannels: openChanCount }, error };\n        });\n    }\n    /**\n     * Closes and removes a subscription and returns the number of open subscriptions.\n     *\n     * @param subscription The subscription you want to close and remove.\n     */\n    removeSubscription(subscription) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const { error } = yield this._closeSubscription(subscription);\n            const allSubs = this.getSubscriptions();\n            const openSubCount = allSubs.filter((chan) => chan.isJoined()).length;\n            if (allSubs.length === 0)\n                yield this.realtime.disconnect();\n            return { data: { openSubscriptions: openSubCount }, error };\n        });\n    }\n    _closeSubscription(subscription) {\n        return __awaiter(this, void 0, void 0, function* () {\n            let error = null;\n            if (!subscription.isClosed()) {\n                const { error: unsubError } = yield this._unsubscribeSubscription(subscription);\n                error = unsubError;\n            }\n            this.realtime.remove(subscription);\n            return { error };\n        });\n    }\n    _unsubscribeSubscription(subscription) {\n        return new Promise((resolve) => {\n            subscription\n                .unsubscribe()\n                .receive('ok', () => resolve({ error: null }))\n                .receive('error', (error) => resolve({ error }))\n                .receive('timeout', () => resolve({ error: new Error('timed out') }));\n        });\n    }\n    /**\n     * Returns an array of all your subscriptions.\n     */\n    getSubscriptions() {\n        return this.realtime.channels;\n    }\n    _initSupabaseAuthClient({ autoRefreshToken, persistSession, detectSessionInUrl, localStorage, headers, fetch, cookieOptions, multiTab, }) {\n        const authHeaders = {\n            Authorization: `Bearer ${this.supabaseKey}`,\n            apikey: `${this.supabaseKey}`,\n        };\n        return new SupabaseAuthClient({\n            url: this.authUrl,\n            headers: Object.assign(Object.assign({}, headers), authHeaders),\n            autoRefreshToken,\n            persistSession,\n            detectSessionInUrl,\n            localStorage,\n            fetch,\n            cookieOptions,\n            multiTab,\n        });\n    }\n    _initRealtimeClient(options) {\n        return new RealtimeClient(this.realtimeUrl, Object.assign(Object.assign({}, options), { params: Object.assign(Object.assign({}, options === null || options === void 0 ? void 0 : options.params), { apikey: this.supabaseKey }) }));\n    }\n    _initPostgRESTClient() {\n        return new PostgrestClient(this.restUrl, {\n            headers: this._getAuthHeaders(),\n            schema: this.schema,\n            fetch: this.fetch,\n            throwOnError: this.shouldThrowOnError,\n        });\n    }\n    _getAuthHeaders() {\n        var _a, _b;\n        const headers = Object.assign({}, this.headers);\n        const authBearer = (_b = (_a = this.auth.session()) === null || _a === void 0 ? void 0 : _a.access_token) !== null && _b !== void 0 ? _b : this.supabaseKey;\n        headers['apikey'] = this.supabaseKey;\n        headers['Authorization'] = headers['Authorization'] || `Bearer ${authBearer}`;\n        return headers;\n    }\n    _listenForMultiTabEvents() {\n        if (!this.multiTab || !isBrowser() || !(window === null || window === void 0 ? void 0 : window.addEventListener)) {\n            return null;\n        }\n        try {\n            return window === null || window === void 0 ? void 0 : window.addEventListener('storage', (e) => {\n                var _a, _b, _c;\n                if (e.key === STORAGE_KEY) {\n                    const newSession = JSON.parse(String(e.newValue));\n                    const accessToken = (_b = (_a = newSession === null || newSession === void 0 ? void 0 : newSession.currentSession) === null || _a === void 0 ? void 0 : _a.access_token) !== null && _b !== void 0 ? _b : undefined;\n                    const previousAccessToken = (_c = this.auth.session()) === null || _c === void 0 ? void 0 : _c.access_token;\n                    if (!accessToken) {\n                        this._handleTokenChanged('SIGNED_OUT', accessToken, 'STORAGE');\n                    }\n                    else if (!previousAccessToken && accessToken) {\n                        this._handleTokenChanged('SIGNED_IN', accessToken, 'STORAGE');\n                    }\n                    else if (previousAccessToken !== accessToken) {\n                        this._handleTokenChanged('TOKEN_REFRESHED', accessToken, 'STORAGE');\n                    }\n                }\n            });\n        }\n        catch (error) {\n            console.error('_listenForMultiTabEvents', error);\n            return null;\n        }\n    }\n    _listenForAuthEvents() {\n        let { data } = this.auth.onAuthStateChange((event, session) => {\n            this._handleTokenChanged(event, session === null || session === void 0 ? void 0 : session.access_token, 'CLIENT');\n        });\n        return data;\n    }\n    _handleTokenChanged(event, token, source) {\n        if ((event === 'TOKEN_REFRESHED' || event === 'SIGNED_IN') &&\n            this.changedAccessToken !== token) {\n            // Token has changed\n            this.realtime.setAuth(token);\n            // Ideally we should call this.auth.recoverSession() - need to make public\n            // to trigger a \"SIGNED_IN\" event on this client.\n            if (source == 'STORAGE')\n                this.auth.setAuth(token);\n            this.changedAccessToken = token;\n        }\n        else if (event === 'SIGNED_OUT' || event === 'USER_DELETED') {\n            // Token is removed\n            this.realtime.setAuth(this.supabaseKey);\n            if (source == 'STORAGE')\n                this.auth.signOut();\n        }\n    }\n}\n","import SupabaseClient from './SupabaseClient';\nexport * from '@supabase/gotrue-js';\nexport * from '@supabase/realtime-js';\n/**\n * Creates a new Supabase Client.\n */\nconst createClient = (supabaseUrl, supabaseKey, options) => {\n    return new SupabaseClient(supabaseUrl, supabaseKey, options);\n};\nexport { createClient, SupabaseClient, };\n","import { GoTrueClient } from '@supabase/gotrue-js';\nexport class SupabaseAuthClient extends GoTrueClient {\n    constructor(options) {\n        super(options);\n    }\n}\n","import { PostgrestQueryBuilder } from '@supabase/postgrest-js';\nimport { SupabaseRealtimeClient } from './SupabaseRealtimeClient';\nexport class SupabaseQueryBuilder extends PostgrestQueryBuilder {\n    constructor(url, { headers = {}, schema, realtime, table, fetch, shouldThrowOnError, }) {\n        super(url, { headers, schema, fetch, shouldThrowOnError });\n        this._subscription = null;\n        this._realtime = realtime;\n        this._headers = headers;\n        this._schema = schema;\n        this._table = table;\n    }\n    /**\n     * Subscribe to realtime changes in your database.\n     * @param event The database event which you would like to receive updates for, or you can use the special wildcard `*` to listen to all changes.\n     * @param callback A callback that will handle the payload that is sent whenever your database changes.\n     */\n    on(event, callback) {\n        if (!this._realtime.isConnected()) {\n            this._realtime.connect();\n        }\n        if (!this._subscription) {\n            this._subscription = new SupabaseRealtimeClient(this._realtime, this._headers, this._schema, this._table);\n        }\n        return this._subscription.on(event, callback);\n    }\n}\n","import { Transformers } from '@supabase/realtime-js';\nexport class SupabaseRealtimeClient {\n    constructor(socket, headers, schema, tableName) {\n        const chanParams = {};\n        const topic = tableName === '*' ? `realtime:${schema}` : `realtime:${schema}:${tableName}`;\n        const userToken = headers['Authorization'].split(' ')[1];\n        if (userToken) {\n            chanParams['user_token'] = userToken;\n        }\n        this.subscription = socket.channel(topic, chanParams);\n    }\n    getPayloadRecords(payload) {\n        const records = {\n            new: {},\n            old: {},\n        };\n        if (payload.type === 'INSERT' || payload.type === 'UPDATE') {\n            records.new = Transformers.convertChangeData(payload.columns, payload.record);\n        }\n        if (payload.type === 'UPDATE' || payload.type === 'DELETE') {\n            records.old = Transformers.convertChangeData(payload.columns, payload.old_record);\n        }\n        return records;\n    }\n    /**\n     * The event you want to listen to.\n     *\n     * @param event The event\n     * @param callback A callback function that is called whenever the event occurs.\n     */\n    on(event, callback) {\n        this.subscription.on(event, (payload) => {\n            let enrichedPayload = {\n                schema: payload.schema,\n                table: payload.table,\n                commit_timestamp: payload.commit_timestamp,\n                eventType: payload.type,\n                new: {},\n                old: {},\n                errors: payload.errors,\n            };\n            enrichedPayload = Object.assign(Object.assign({}, enrichedPayload), this.getPayloadRecords(payload));\n            callback(enrichedPayload);\n        });\n        return this;\n    }\n    /**\n     * Enables the subscription.\n     */\n    subscribe(callback = () => { }) {\n        this.subscription.onError((e) => callback('SUBSCRIPTION_ERROR', e));\n        this.subscription.onClose(() => callback('CLOSED'));\n        this.subscription\n            .subscribe()\n            .receive('ok', () => callback('SUBSCRIBED'))\n            .receive('error', (e) => callback('SUBSCRIPTION_ERROR', e))\n            .receive('timeout', () => callback('RETRYING_AFTER_TIMEOUT'));\n        return this.subscription;\n    }\n}\n","// constants.ts\nimport { version } from './version';\nexport const DEFAULT_HEADERS = { 'X-Client-Info': `supabase-js/${version}` };\nexport const STORAGE_KEY = 'supabase.auth.token';\n","// helpers.ts\nexport function uuid() {\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n        var r = (Math.random() * 16) | 0, v = c == 'x' ? r : (r & 0x3) | 0x8;\n        return v.toString(16);\n    });\n}\nexport function stripTrailingSlash(url) {\n    return url.replace(/\\/$/, '');\n}\nexport const isBrowser = () => typeof window !== 'undefined';\n","export const version = '1.35.4';\n","var naiveFallback = function () {\n\tif (typeof self === \"object\" && self) return self;\n\tif (typeof window === \"object\" && window) return window;\n\tthrow new Error(\"Unable to resolve global `this`\");\n};\n\nmodule.exports = (function () {\n\tif (this) return this;\n\n\t// Unexpected strict mode (may happen if e.g. bundled into ESM module)\n\n\t// Fallback to standard globalThis if available\n\tif (typeof globalThis === \"object\" && globalThis) return globalThis;\n\n\t// Thanks @mathiasbynens -> https://mathiasbynens.be/notes/globalthis\n\t// In all ES5+ engines global object inherits from Object.prototype\n\t// (if you approached one that doesn't please report)\n\ttry {\n\t\tObject.defineProperty(Object.prototype, \"__global__\", {\n\t\t\tget: function () { return this; },\n\t\t\tconfigurable: true\n\t\t});\n\t} catch (error) {\n\t\t// Unfortunate case of updates to Object.prototype being restricted\n\t\t// via preventExtensions, seal or freeze\n\t\treturn naiveFallback();\n\t}\n\ttry {\n\t\t// Safari case (window.__global__ works, but __global__ does not)\n\t\tif (!__global__) return naiveFallback();\n\t\treturn __global__;\n\t} finally {\n\t\tdelete Object.prototype.__global__;\n\t}\n})();\n","import { map } from './map';\nexport function pluck(...properties) {\n    const length = properties.length;\n    if (length === 0) {\n        throw new Error('list of properties cannot be empty.');\n    }\n    return (source) => map(plucker(properties, length))(source);\n}\nfunction plucker(props, length) {\n    const mapper = (x) => {\n        let currentProp = x;\n        for (let i = 0; i < length; i++) {\n            const p = currentProp != null ? currentProp[props[i]] : undefined;\n            if (p !== void 0) {\n                currentProp = p;\n            }\n            else {\n                return undefined;\n            }\n        }\n        return currentProp;\n    };\n    return mapper;\n}\n","var _globalThis;\nif (typeof globalThis === 'object') {\n\t_globalThis = globalThis;\n} else {\n\ttry {\n\t\t_globalThis = require('es5-ext/global');\n\t} catch (error) {\n\t} finally {\n\t\tif (!_globalThis && typeof window !== 'undefined') { _globalThis = window; }\n\t\tif (!_globalThis) { throw new Error('Could not determine global this'); }\n\t}\n}\n\nvar NativeWebSocket = _globalThis.WebSocket || _globalThis.MozWebSocket;\nvar websocket_version = require('./version');\n\n\n/**\n * Expose a W3C WebSocket class with just one or two arguments.\n */\nfunction W3CWebSocket(uri, protocols) {\n\tvar native_instance;\n\n\tif (protocols) {\n\t\tnative_instance = new NativeWebSocket(uri, protocols);\n\t}\n\telse {\n\t\tnative_instance = new NativeWebSocket(uri);\n\t}\n\n\t/**\n\t * 'native_instance' is an instance of nativeWebSocket (the browser's WebSocket\n\t * class). Since it is an Object it will be returned as it is when creating an\n\t * instance of W3CWebSocket via 'new W3CWebSocket()'.\n\t *\n\t * ECMAScript 5: http://bclary.com/2004/11/07/#a-13.2.2\n\t */\n\treturn native_instance;\n}\nif (NativeWebSocket) {\n\t['CONNECTING', 'OPEN', 'CLOSING', 'CLOSED'].forEach(function(prop) {\n\t\tObject.defineProperty(W3CWebSocket, prop, {\n\t\t\tget: function() { return NativeWebSocket[prop]; }\n\t\t});\n\t});\n}\n\n/**\n * Module exports.\n */\nmodule.exports = {\n    'w3cwebsocket' : NativeWebSocket ? W3CWebSocket : null,\n    'version'      : websocket_version\n};\n","module.exports = require('../package.json').version;\n"],"names":["__awaiter","thisArg","_arguments","P","generator","adopt","value","resolve","Promise","reject","fulfilled","step","next","e","rejected","result","done","then","apply","resolveFetch","customFetch","_fetch","fetch","args","FunctionsClient","constructor","url","headers","setAuth","token","Authorization","invoke","functionName","invokeOptions","body","response","method","Object","assign","isRelayError","get","data","error","Error","text","responseType","json","arrayBuffer","blob","post","put","remove","COOKIE_OPTIONS","setCookies","getCookieString","expiresAt","GoTrueApi","cookieOptions","_createRequestHeaders","jwt","cookieName","_a","name","getUrlForProvider","provider","options","urlParams","encodeURIComponent","redirectTo","push","scopes","queryParams","query","URLSearchParams","join","signUpWithEmail","email","password","queryString","gotrue_meta_security","captcha_token","captchaToken","session","expires_in","expires_at","signInWithEmail","signUpWithPhone","phone","signInWithPhone","signInWithOpenIDConnect","id_token","nonce","client_id","issuer","sendMagicLinkEmail","shouldCreateUser","create_user","sendMobileOTP","signOut","noResolveJson","verifyMobileOTP","type","redirect_to","verifyOTP","inviteUserByEmail","resetPasswordForEmail","refreshAccessToken","refreshToken","refresh_token","setAuthCookie","req","res","setHeader","status","end","event","key","access_token","map","domain","maxAge","lifetime","path","sameSite","deleteAuthCookie","redirect","getAuthCookieString","getHeader","generateLink","createUser","attributes","user","listUsers","users","getUserById","uid","getUserByCookie","cookies","getUserError","getUser","updateUserById","deleteUser","updateUser","isBrowser","getParameterByName","uuid","setItemAsync","removeItemAsync","getItemSynchronously","getItemAsync","GOTRUE_URL","DEFAULT_HEADERS","STORAGE_KEY","EXPIRY_MARGIN","NETWORK_FAILURE","polyfillGlobalThis","DEFAULT_OPTIONS","autoRefreshToken","persistSession","detectSessionInUrl","multiTab","GoTrueClient","stateChangeEmitters","Map","networkRetries","settings","currentUser","currentSession","localStorage","globalThis","api","_recoverSession","_recoverAndRefresh","_listenForMultiTabEvents","_handleVisibilityChange","getSessionFromUrl","storeSession","console","signUp","_removeSession","_saveSession","_notifyAllSubscribers","id","signIn","oidc","_handleEmailSignIn","_handlePhoneSignIn","_callRefreshToken","_handleProviderSignIn","_handleOpenIDConnectSignIn","params","refreshSession","update","setSession","token_type","error_description","provider_token","timeNow","Math","round","Date","now","parseInt","recoveryMode","window","location","hash","accessToken","onAuthStateChange","callback","subscription","unsubscribe","delete","set","_b","confirmed_at","email_confirmed_at","phone_confirmed_at","href","log","message","ERROR_MESSAGE","MAX_RETRIES","refreshTokenTimer","clearTimeout","setTimeout","pow","RETRY_INTERVAL","err","forEach","x","expiresIn","refreshDurationBeforeExpires","_startAutoRefreshToken","_persistSession","unref","addEventListener","newSession","JSON","parse","String","newValue","document","visibilityState","version","AUDIENCE","serialize","val","opt","enc","fieldContentRegExp","TypeError","test","str","isNaN","isFinite","floor","expires","toUTCString","httpOnly","secure","toLowerCase","isSecureEnvironment","host","indexOf","split","endsWith","serializeCookie","cookie","_c","strCookies","c","previousCookies","Array","prototype","setCookie","deleteCookie","_getErrorMessage","msg","stringify","handleError","_getRequestParams","_handleRequest","fetcher","ok","catch","replace","r","random","v","toString","regex","RegExp","results","exec","decodeURIComponent","storage","setItem","getItem","removeItem","defineProperty","configurable","__magic__","self","PostgrestQueryBuilder","PostgrestRpcBuilder","PostgrestClient","schema","throwOnError","shouldThrowOnError","auth","from","table","rpc","fn","head","count","PostgrestFilterBuilder","PostgrestBuilder","PostgrestTransformBuilder","arguments","cs","contains","cd","containedBy","sl","rangeLt","sr","rangeGt","nxl","rangeGte","nxr","rangeLte","adj","rangeAdjacent","ov","overlaps","not","column","operator","searchParams","append","or","filters","foreignTable","eq","neq","gt","gte","lt","lte","like","pattern","ilike","is","in","values","cleanedValues","s","isArray","range","textSearch","config","typePart","configPart","undefined","fts","plfts","phfts","wfts","filter","match","keys","URL","select","columns","quoted","cleanedColumns","insert","upsert","onConflict","returning","prefersHeaders","unshift","reduce","acc","concat","length","uniqueColumns","Set","ignoreDuplicates","entries","order","ascending","nullsFirst","existingOrder","limit","to","keyOffset","keyLimit","abortSignal","signal","single","maybeSingle","allowEmpty","csv","builder","onfulfilled","onrejected","includes","_d","statusText","isReturnMinimal","countHeader","contentRange","_e","details","postgrestResponse","fetchError","hint","code","CHANNEL_EVENTS","CHANNEL_STATES","Push","Timer","RealtimePresence","RealtimeChannel","topic","socket","bindings","state","closed","joinedOnce","pushBuffer","timeout","joinPush","rejoinTimer","rejoinUntilConnected","reconnectAfterMs","receive","joined","reset","pushEvent","send","onClose","joinRef","onError","reason","isLeaving","isClosed","errored","scheduleTimeout","isJoining","on","reply","payload","ref","trigger","replyEventName","presence","list","isConnected","rejoin","subscribe","configs","binding","updateJoinPayload","close","off","bind","isEqual","canPush","isJoined","startTimeout","updatePayload","leaving","destroy","leavePush","leave","onMessage","isMember","leaveOpenTopic","joining","resend","events","handledPayload","isErrored","obj1","obj2","k","__rest","t","p","hasOwnProperty","call","getOwnPropertySymbols","i","propertyIsEnumerable","w3cwebsocket","VSN","TRANSPORTS","SOCKET_STATES","DEFAULT_TIMEOUT","WS_CLOSE_NORMAL","CONNECTION_STATE","Serializer","RealtimeSubscription","noop","RealtimeClient","endPoint","channels","transport","heartbeatIntervalMs","longpollerTimeout","heartbeatTimer","pendingHeartbeatRef","logger","conn","sendBuffer","serializer","stateChangeCallbacks","open","websocket","tries","encode","decode","reconnectTimer","disconnect","connect","endPointURL","binaryType","onopen","_onConnOpen","onerror","_onConnError","onmessage","onConnMessage","onclose","_onConnClose","_reject","clearInterval","kind","onOpen","connectionState","readyState","connecting","Connecting","Open","closing","Closing","Closed","channel","chanParams","selfBroadcast","self_broadcast","chan","vsndate","onJoin","currentPresences","newPresences","onLeave","leftPresences","onSync","rawMessage","_appendParams","vsn","makeRef","newRef","user_token","dupChannel","find","_flushSendBuffer","setInterval","_sendHeartbeat","_triggerChanError","prefix","opts","pendingDiffs","caller","diff","newState","syncState","syncDiff","inPendingSyncState","currentState","cloneDeep","transformedState","transformState","joins","leaves","presences","newPresenceIds","m","presence_id","curPresenceIds","joinedPresences","joinedPresenceIds","curPresences","presenceIdsToRemove","chooser","_key","pres","obj","func","getOwnPropertyNames","metas","by","Transformers","sent","timeoutTimer","receivedResp","recHooks","refEvent","_cancelRefEvent","_hasReceived","_cancelTimeout","_matchReceive","h","HEADER_LENGTH","rawPayload","ArrayBuffer","_binaryDecode","buffer","view","DataView","decoder","TextDecoder","_decodeBroadcast","topicSize","getUint8","eventSize","offset","slice","byteLength","timerCalc","timer","PostgresTypes","convertChangeData","record","skipTypes","rec_key","convertColumn","columnName","colType","convertCell","charAt","dataType","toArray","bool","toBoolean","float4","float8","int2","int4","int8","numeric","oid","toNumber","jsonb","toJson","timestamp","toTimestampString","abstime","date","daterange","int4range","int8range","money","reltime","time","timestamptz","timetz","tsrange","tstzrange","parsedValue","parseFloat","Number","lastIdx","closeBrace","openBrace","arr","valTrim","_","StorageBucketApi","StorageFileApi","StorageClient","listBuckets","getBucket","createBucket","public","updateBucket","emptyBucket","deleteBucket","DEFAULT_SEARCH_OPTIONS","sortBy","DEFAULT_FILE_OPTIONS","cacheControl","contentType","bucketId","uploadOrUpdate","fileBody","fileOptions","Blob","FormData","cleanPath","_removeEmptyFolders","_path","_getFinalPath","Key","upload","move","fromPath","toPath","sourceKey","destinationKey","copy","createSignedUrl","signedURL","createSignedUrls","paths","datum","download","getPublicUrl","publicURL","prefixes","parameters","stripTrailingSlash","SupabaseAuthClient","SupabaseQueryBuilder","SupabaseStorageClient","SupabaseClient","supabaseUrl","supabaseKey","_supabaseUrl","restUrl","realtimeUrl","authUrl","storageUrl","isPlatform","urlParts","functionsUrl","_initSupabaseAuthClient","realtime","_initRealtimeClient","_listenForAuthEvents","functions","_getAuthHeaders","rest","_initPostgRESTClient","userToken","removeAllSubscriptions","allSubs","getSubscriptions","allSubPromises","sub","removeSubscription","allRemovedSubs","all","removeChannel","_closeSubscription","allChans","openChanCount","openChannels","openSubCount","openSubscriptions","unsubError","_unsubscribeSubscription","authHeaders","apikey","authBearer","previousAccessToken","_handleTokenChanged","source","changedAccessToken","createClient","SupabaseRealtimeClient","_subscription","_realtime","_headers","_schema","_table","tableName","getPayloadRecords","records","new","old","old_record","enrichedPayload","commit_timestamp","eventType","errors","naiveFallback","module","exports","__global__","pluck","properties","plucker","props","mapper","currentProp","_globalThis","require","NativeWebSocket","WebSocket","MozWebSocket","websocket_version","W3CWebSocket","uri","protocols","native_instance","prop"],"sourceRoot":"webpack:///"}